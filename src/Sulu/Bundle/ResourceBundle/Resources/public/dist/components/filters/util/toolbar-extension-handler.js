define([],function(){"use strict";var a={filterListUrl:"resource/filters/",manageFilters:"manage",filtersUrl:"api/filters?flat=true&context="},b=function(b,e,f,g){if(b&&e&&f){var h=a.filtersUrl+b,i=d.call(this,b,f,h);this.filterResultSelector=g,this.context=b,this.datagridInstance=f,e.push(i),this.sandbox.on("husky.datagrid."+f+".updated",c.bind(this))}},c=function(a){this.filterResultComponentStarted?this.sandbox.emit("",a.total,this.item):(this.filterResultComponentStarted=!0,App.start([{name:"filter-result@suluresource",options:{el:this.filterResultSelector,filter:this.filter,datagridInstance:this.datagridInstance,numberOfResults:a.total,filtersUrl:"TODO",instanceName:this.context}}]))},d=function(b,c,d){return{id:"filters",icon:"filter",title:this.sandbox.translate("resource.filter"),group:2,position:1,"class":"highlight-white",type:"select",itemsOption:{url:d,resultKey:"filters",titleAttribute:"name",idAttribute:"id",translate:!1,languageNamespace:"toolbar.",markable:!0,callback:function(a){e.call(this,a,c,b)}.bind(this)},items:[{id:a.manageFilters,name:this.sandbox.translate("resource.filter.manage")}]}},e=function(b,c,d){b.id!==a.manageFilters?(this.filter=b,this.sandbox.emit("husky.datagrid."+c+".url.update",{filter:b.id})):(this.filter=null,this.sandbox.emit("sulu.router.navigate",a.filterListUrl+d))};return{initialize:function(a){a.components.before("initialize",function(){"Sulu App"===this.name&&this.sandbox.on("sulu.header.toolbar.extend",b.bind(this))})}}});
