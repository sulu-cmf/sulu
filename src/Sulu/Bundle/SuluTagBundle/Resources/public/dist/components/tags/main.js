define(["sulutag/model/tag"],function(a){"use strict";return{initialize:function(){if(this.bindCustomEvents(),"list"!==this.options.display)throw"display type wrong";this.renderList()},bindCustomEvents:function(){this.sandbox.on("sulu.tags.delete",function(a){this.delTags(a)},this)},renderList:function(){var a=this.sandbox.dom.createElement('<div id="contacts-list-container"/>');this.html(a),this.sandbox.start([{name:"tags/components/list@sulutag",options:{el:a}}])},delTags:function(b){this.confirmDeleteDialog(function(c){c&&b.forEach(function(b){var c=new a({id:b});c.destroy({success:function(){this.sandbox.emit("husky.datagrid.record.remove",b)}.bind(this),error:function(){this.sandbox.logger.log("error while removing tag with id "+b)}.bind(this)})}.bind(this))}.bind(this))},confirmDeleteDialog:function(a){if(a&&"function"!=typeof a)throw"callback is not a function";this.sandbox.emit("sulu.overlay.show-warning","sulu.overlay.be-careful","sulu.overlay.delete-desc",function(){a(!1)}.bind(this),function(){a(!0)}.bind(this))}}});