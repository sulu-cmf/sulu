define(["jquery","text!./condition-list.html"],function(a,b){var c={addButtonSelector:".addButton",removeButtonSelector:".remove",conditionRowSelector:".condition-row",typeSelectSelector:"[data-condition-type]",conditionSelector:"[data-condition]",conditionIdSelector:"[data-condition-id]"},d=function(){this.$el.on("click",c.addButtonSelector,function(){e.call(this)}.bind(this)),this.$el.on("click",c.removeButtonSelector,function(b){a(b.currentTarget).parents(c.conditionRowSelector).remove()}),this.$el.on("change",c.typeSelectSelector,function(b){var d=a(b.currentTarget);f.call(this,d.parents(c.conditionRowSelector),d.data("selection")[0])}.bind(this))},e=function(b){var d=a(this.options.conditionRowTemplate({translations:this.translations}));this.$conditionList.append(d),this.sandbox.start(d).then(function(){b&&(d.find(c.conditionIdSelector).val(b.id),d.find(c.typeSelectSelector).data({selection:[b.type],selectionValues:[d.find("[data-id="+b.type+"] .item-value").html()]}).trigger("data-changed"),f.call(this,d,b.type),Object.keys(b.condition).forEach(function(a){g(d,a).val(b.condition[a])}))}.bind(this))},f=function(a,b){a.find(c.conditionSelector).html(this.options.conditionTypesTemplate.find("#"+b).html())},g=function(a,b){return a.find("[data-condition-name="+b+"]")};return{defaults:{templates:{conditionList:b},translations:{conditionAdd:"sulu_audience_targeting.condition-add",pleaseChoose:"public.please-choose"}},initialize:function(){this.render(),d.call(this)},render:function(){this.$el.html(this.templates.conditionList({translations:this.translations})),this.$conditionList=this.$el.find(".condition-list"),this.options.data&&this.options.data.forEach(function(a){e.call(this,a)}.bind(this))}}});