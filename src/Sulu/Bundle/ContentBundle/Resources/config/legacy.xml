<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="sulu.content.mapper.class">Sulu\Component\Content\Mapper\ContentMapper</parameter>
        <parameter key="sulu.content.structure_manager.class">Sulu\Component\Content\Compat\StructureManager</parameter>
        <parameter key="sulu.util.node_helper.class">Sulu\Component\Util\SuluNodeHelper</parameter>
    </parameters>

    <services>

        <!-- content mapper -->
        <service id="sulu.content.mapper" class="%sulu.content.mapper.class%">
            <argument type="service" id="sulu_document_manager.document_manager" />
            <argument type="service" id="sulu_core.webspace.webspace_manager"/>
            <argument type="service" id="form.factory" />
            <argument type="service" id="sulu_document_manager.document_inspector" />
            <argument type="service" id="sulu_document_manager.property_encoder" />
            <argument type="service" id="sulu.content.structure_manager"/>
            <argument type="service" id="sulu_content.extension.manager"/>
            <argument type="service" id="sulu.content.type_manager"/>
            <argument type="service" id="sulu.phpcr.session"/>
            <argument type="service" id="event_dispatcher"/>
            <argument type="service" id="sulu.content.rlp.strategy.tree"/>
            <argument type="service" id="sulu_document_manager.namespace_registry" />
        </service>

        <!-- structure manager -->
        <service id="sulu.content.structure_manager" class="%sulu.content.structure_manager.class%">
            <argument type="service" id="sulu_content.structure.factory" />
            <argument type="service" id="sulu_document_manager.document_inspector" />
            <argument type="service" id="sulu_content.compat.structure.legacy_property_factory" />
            <argument>%sulu.content.structure.type_map%</argument>
        </service>

            <argument type="service" id="liip_theme.active_theme"/>
            <argument type="service" id="sulu.content.webspace_structure_provider.cache"/>
        </service>

        <!-- sulu node helper -->
        <service id="sulu.util.node_helper" class="%sulu.util.node_helper.class%">
            <argument type="service" id="doctrine_phpcr.default_session"/>
            <argument>%sulu.content.language.namespace%</argument>
            <argument type="collection">
                <argument key="base">%sulu.content.node_names.base%</argument>
                <argument key="content">%sulu.content.node_names.content%</argument>
                <argument key="route">%sulu.content.node_names.route%</argument>
                <argument key="snippet">%sulu.content.node_names.snippet%</argument>
            </argument>
        </service>
    </services>
</container>
