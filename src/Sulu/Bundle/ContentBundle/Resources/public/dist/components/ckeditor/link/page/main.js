define(function(){"use strict";return{defaults:{options:{link:{},locale:null,webspace:null,setHref:function(a,b,c){},selectCallback:function(a,b){}},templates:{contentDatasource:'<div id="href-select" class="data-source-content"/>'}},initialize:function(){var a=$(this.templates.contentDatasource());this.$el.append(a),this.sandbox.start([{name:"content-datasource@sulucontent",options:{el:a,selected:this.options.link.href,webspace:this.options.webspace,locale:this.options.locale,selectedUrl:"/admin/api/nodes/{datasource}?tree=true&webspace={webspace}&language={locale}&fields=title,order,published&webspace-nodes=all",rootUrl:"/admin/api/nodes?webspace={webspace}&language={locale}&fields=title,order,published&webspace-nodes=all",resultKey:"nodes",instanceName:"internal-link",instanceNamePrefix:"",showStatus:!0,selectCallback:function(a,b,c,d){this.options.selectCallback(a,c,!!d.published)}.bind(this)}}]).then(function(){return this.options.link.href?void this.sandbox.once("husky.column-navigation.internal-link.loaded",function(){this.sandbox.emit("husky.column-navigation.internal-link.get-breadcrumb",function(a){if(0===a.length)return void this.options.setHref();var b=a[a.length-1];this.options.setHref(b.id,b.title,!!b.published)}.bind(this))}.bind(this)):void this.options.setHref()}.bind(this))}}});