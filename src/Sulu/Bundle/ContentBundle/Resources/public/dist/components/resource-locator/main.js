define(["config"],function(a){"use strict";var b={instanceName:null,url:null,historyApi:null,historyResultKey:"resourcelocators",pathKey:"resourceLocator",deleteApi:null,inputType:null,webspaceKey:null},c=function(a){if(a.hasOwnProperty("value")&&"/"===a.value)return['<div class="resource-locator">','   <span id="'+a.ids.url+'" class="grey-font">',a.url?a.url:"","</span>",'   <span id="'+a.ids.tree+'" class="grey-font"></span>',"</div>"].join("");var b=['<div style="display: inline-block;"','     data-aura-component="resource-locator/history@sulucontent" ','     data-aura-url="',a.historyApi,'"','     data-aura-result-key="',a.historyResultKey,'"','     data-aura-path-key="',a.pathKey,'"/>'];return['<div class="resource-locator">','   <span id="'+a.ids.url+'" class="grey-font">',a.url?a.url:"","</span>",'   <span id="'+a.ids.tree+'" class="grey-font"></span>','   <input type="text" id="'+a.ids.input+'" class="form-element"/>',a.historyApi?b.join(""):"","</div>"].join("")},d=function(a){return"#"+this.options.ids[a]},e=function(){this.options.ids={url:"resource-locator-"+this.options.instanceName+"-url",input:"resource-locator-"+this.options.instanceName+"-input",tree:"resource-locator-"+this.options.instanceName+"-tree",toggle:"resource-locator-"+this.options.instanceName+"-toggle"},this.html(c(this.options)),g.call(this),f.call(this)},f=function(){this.sandbox.dom.on(this.$el,"data-changed",function(a,b){g.call(this,b)}.bind(this)),this.sandbox.dom.on(d.call(this,"input"),"keyup",h.bind(this)),this.sandbox.dom.on(d.call(this,"input"),"change",function(){this.sandbox.emit("sulu.content.changed")}.bind(this)),this.sandbox.dom.on(d.call(this,"input"),"focusout",function(){this.$el.trigger("focusout")}.bind(this))},g=function(a){a||(a=this.sandbox.dom.data(this.$el,"value"),a||(a=""));var b,c;"leaf"===i.call(this,this.options.webspaceKey)?(b=a.split("/"),c=b.pop()):(b=[],c=a.substring(1)),this.sandbox.dom.data(this.$el,"part",c),this.sandbox.dom.val(d.call(this,"input"),c),this.sandbox.dom.html(d.call(this,"tree"),b.join("/")+"/")},h=function(){var a=this.sandbox.dom.val(d.call(this,"input")),b=this.sandbox.dom.html(d.call(this,"tree"));this.sandbox.dom.data(this.$el,"part",a),this.sandbox.dom.data(this.$el,"value",b+a)},i=function(b){return this.options.inputType?this.options.inputType:a.get("sulu_content.webspace_input_types")[b]};return{initialize:function(){this.options=this.sandbox.util.extend({},b,this.options),e.call(this)}}});