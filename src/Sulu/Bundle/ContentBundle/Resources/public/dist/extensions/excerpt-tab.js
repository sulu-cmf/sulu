define(["jquery"],function(a){"use strict";var b={name:"excerpt-tab",defaults:{options:{formId:"#content-form"}},layout:{extendExisting:!0,content:{width:"fixed",rightSpace:!1,leftSpace:!1}},initialize:function(){this.tabInitialize(),this.render(this.data),this.bindCustomEvents(),this.bindDomEvents()},bindCustomEvents:function(){this.sandbox.on("sulu.tab.save",function(a){this.submit(a)},this)},bindDomEvents:function(){},submit:function(a){this.sandbox.form.validate(this.options.formId)&&(this.data=this.sandbox.form.getData(this.options.formId),this.save(this.data,a))},render:function(a){this.data=a,require([this.getTemplate()],function(b){this.$el.html(this.sandbox.util.template(b,{translate:this.sandbox.translate,options:this.options})),this.sandbox.dom.removeClass(".preview-update","preview-update"),this.createForm(a)}.bind(this))},createForm:function(a){this.sandbox.form.create(this.options.formId).initialized.then(function(){this.sandbox.form.setData(this.options.formId,a).then(function(){this.sandbox.start(this.options.formId),this.listenForChange()}.bind(this))}.bind(this))},listenForChange:function(){this.sandbox.dom.on(this.options.formId,"keyup change",function(){this.setHeaderBar()}.bind(this),".trigger-save-button"),this.sandbox.on("sulu.content.changed",function(){this.setHeaderBar()}.bind(this))},loadComponentData:function(){var b=a.Deferred();return b.resolve(this.parseData(this.options.data())),b},tabInitialize:function(){this.sandbox.emit("sulu.tab.initialize",this.name)},setHeaderBar:function(){this.sandbox.emit("sulu.tab.dirty")},getTemplate:function(){return"text!/admin/content/template/form/excerpt.html?language="+this.options.language},saved:function(a){this.sandbox.emit("sulu.tab.saved",a)},parseData:function(a){return a},save:function(a,b){throw new Error('"save" not implemented')}};return{name:b.name,initialize:function(a){a.components.addType(b.name,b)}}});