define("app-config",[],function(){"use strict";var e=JSON.parse(JSON.stringify(SULU));return{getUser:function(){return e.user},getSection:function(t){return e.sections[t]?e.sections[t]:null},getDebug:function(){return e.debug}}}),require.config({waitSeconds:0,paths:{suluadmin:"../../suluadmin/js",main:"main","app-config":"components/app-config/main",config:"components/config/main","widget-groups":"components/sidebar/widget-groups",cultures:"vendor/globalize/cultures",husky:"vendor/husky/husky","aura_extensions/backbone-relational":"aura_extensions/backbone-relational","aura_extensions/sulu-content-tabs":"aura_extensions/sulu-content-tabs","aura_extensions/sulu-extension":"aura_extensions/sulu-extension","aura_extensions/url-manager":"aura_extensions/url-manager","__component__$app@suluadmin":"components/app/main","__component__$content-tabs@suluadmin":"components/content-tabs/main","__component__$overlay@suluadmin":"components/overlay/main","__component__$header@suluadmin":"components/header/main","__component__$list-toolbar@suluadmin":"components/list-toolbar/main","__component__$labels@suluadmin":"components/labels/main","__component__$grid-group@suluadmin":"components/grid-group/main","__component__$sidebar@suluadmin":"components/sidebar/main","__component__$data-overlay@suluadmin":"components/data-overlay/main"},include:["app-config","config","aura_extensions/backbone-relational","aura_extensions/sulu-content","aura_extensions/sulu-extension","aura_extensions/url-manager","widget-groups","__component__$app@suluadmin","__component__$content-tabs@suluadmin","__component__$overlay@suluadmin","__component__$header@suluadmin","__component__$list-toolbar@suluadmin","__component__$labels@suluadmin","__component__$grid-group@suluadmin","__component__$sidebar@suluadmin","__component__$data-overlay@suluadmin"],exclude:["husky"]}),require(["husky","app-config"],function(e,t){"use strict";var n=t.getUser().locale,r;require(["text!/admin/bundles","text!/admin/translations/sulu."+n+".json"],function(i,s){var o=JSON.parse(i),u=JSON.parse(s);r=new e({debug:{enable:t.getDebug()},culture:{name:n,messages:u}}),r.use("aura_extensions/url-manager"),o.forEach(function(e){r.use("/bundles/"+e+"/dist/main.js")}.bind(this)),r.use("aura_extensions/backbone-relational"),r.use("aura_extensions/sulu-content"),r.use("aura_extensions/sulu-extension"),r.components.addSource("suluadmin","/bundles/suluadmin/js/components"),r.use(function(e){window.App=e.sandboxes.create("app-sandbox")}),r.start(),window.app=r})}),define("main",function(){}),define("config",[],function(){"use strict";var e=JSON.parse(JSON.stringify(SULU)),t=e.sections?e.sections:{};return{set:function(e,n){!!e&&typeof e=="string"&&(t[e]=n)},get:function(e){var n,r=null;return!!e&&typeof e=="string"&&t.hasOwnProperty(e)&&(r=t[e],typeof r=="object"&&(n=r instanceof Array?[]:{},r=jQuery.extend(!0,n,r))),r}}}),function(e,t){typeof define=="function"&&define.amd?define("vendor/backbone-relational/backbone-relational",["exports","backbone","underscore"],t):typeof exports!="undefined"?t(exports,require("backbone"),require("underscore")):t(e,e.Backbone,e._)}(this,function(e,t,n){"use strict";t.Relational={showWarnings:!0},t.Semaphore={_permitsAvailable:null,_permitsUsed:0,acquire:function(){if(this._permitsAvailable&&this._permitsUsed>=this._permitsAvailable)throw new Error("Max permits acquired");this._permitsUsed++},release:function(){if(this._permitsUsed===0)throw new Error("All permits released");this._permitsUsed--},isLocked:function(){return this._permitsUsed>0},setAvailablePermits:function(e){if(this._permitsUsed>e)throw new Error("Available permits cannot be less than used permits");this._permitsAvailable=e}},t.BlockingQueue=function(){this._queue=[]},n.extend(t.BlockingQueue.prototype,t.Semaphore,{_queue:null,add:function(e){this.isBlocked()?this._queue.push(e):e()},process:function(){var e=this._queue;this._queue=[];while(e&&e.length)e.shift()()},block:function(){this.acquire()},unblock:function(){this.release(),this.isBlocked()||this.process()},isBlocked:function(){return this.isLocked()}}),t.Relational.eventQueue=new t.BlockingQueue,t.Store=function(){this._collections=[],this._reverseRelations=[],this._orphanRelations=[],this._subModels=[],this._modelScopes=[e]},n.extend(t.Store.prototype,t.Events,{initializeRelation:function(e,r,i){var s=n.isString(r.type)?t[r.type]||this.getObjectByName(r.type):r.type;s&&s.prototype instanceof t.Relation?new s(e,r,i):t.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Relation=%o; missing or invalid relation type!",r)},addModelScope:function(e){this._modelScopes.push(e)},removeModelScope:function(e){this._modelScopes=n.without(this._modelScopes,e)},addSubModels:function(e,t){this._subModels.push({superModelType:t,subModels:e})},setupSuperModel:function(e){n.find(this._subModels,function(t){return n.filter(t.subModels||[],function(n,r){var i=this.getObjectByName(n);if(e===i)return t.superModelType._subModels[r]=e,e._superModel=t.superModelType,e._subModelTypeValue=r,e._subModelTypeAttribute=t.superModelType.prototype.subModelTypeAttribute,!0},this).length},this)},addReverseRelation:function(e){var t=n.any(this._reverseRelations,function(t){return n.all(e||[],function(e,n){return e===t[n]})});!t&&e.model&&e.type&&(this._reverseRelations.push(e),this._addRelation(e.model,e),this.retroFitRelation(e))},addOrphanRelation:function(e){var t=n.any(this._orphanRelations,function(t){return n.all(e||[],function(e,n){return e===t[n]})});!t&&e.model&&e.type&&this._orphanRelations.push(e)},processOrphanRelations:function(){n.each(this._orphanRelations.slice(0),function(e){var r=t.Relational.store.getObjectByName(e.relatedModel);r&&(this.initializeRelation(null,e),this._orphanRelations=n.without(this._orphanRelations,e))},this)},_addRelation:function(e,t){e.prototype.relations||(e.prototype.relations=[]),e.prototype.relations.push(t),n.each(e._subModels||[],function(e){this._addRelation(e,t)},this)},retroFitRelation:function(e){var t=this.getCollection(e.model,!1);t&&t.each(function(t){if(!(t instanceof e.model))return;new e.type(t,e)},this)},getCollection:function(e,r){e instanceof t.RelationalModel&&(e=e.constructor);var i=e;while(i._superModel)i=i._superModel;var s=n.find(this._collections,function(e){return e.model===i});return!s&&r!==!1&&(s=this._createCollection(i)),s},getObjectByName:function(e){var t=e.split("."),r=null;return n.find(this._modelScopes,function(e){r=n.reduce(t||[],function(e,t){return e?e[t]:undefined},e);if(r&&r!==e)return!0},this),r},_createCollection:function(e){var n;return e instanceof t.RelationalModel&&(e=e.constructor),e.prototype instanceof t.RelationalModel&&(n=new t.Collection,n.model=e,this._collections.push(n)),n},resolveIdForItem:function(e,r){var i=n.isString(r)||n.isNumber(r)?r:null;return i===null&&(r instanceof t.RelationalModel?i=r.id:n.isObject(r)&&(i=r[e.prototype.idAttribute])),!i&&i!==0&&(i=null),i},find:function(e,t){var n=this.resolveIdForItem(e,t),r=this.getCollection(e);if(r){var i=r.get(n);if(i instanceof e)return i}return null},register:function(e){var t=this.getCollection(e);if(t){var n=e.collection;t.add(e),e.collection=n}},checkId:function(e,n){var r=this.getCollection(e),i=r&&r.get(n);if(i&&e!==i)throw t.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Duplicate id! Old RelationalModel=%o, new RelationalModel=%o",i,e),new Error("Cannot instantiate more than one Backbone.RelationalModel with the same id per type!")},update:function(e){var t=this.getCollection(e);t.contains(e)||this.register(e),t._onModelEvent("change:"+e.idAttribute,e,t),e.trigger("relational:change:id",e,t)},unregister:function(e){var r,i;e instanceof t.Model?(r=this.getCollection(e),i=[e]):e instanceof t.Collection?(r=this.getCollection(e.model),i=n.clone(e.models)):(r=this.getCollection(e),i=n.clone(r.models)),n.each(i,function(e){this.stopListening(e),n.invoke(e.getRelations(),"stopListening")},this),n.contains(this._collections,e)?r.reset([]):n.each(i,function(e){r.get(e)?r.remove(e):r.trigger("relational:remove",e,r)},this)},reset:function(){this.stopListening(),n.each(this._collections,function(e){this.unregister(e)},this),this._collections=[],this._subModels=[],this._modelScopes=[e]}}),t.Relational.store=new t.Store,t.Relation=function(e,r,i){this.instance=e,r=n.isObject(r)?r:{},this.reverseRelation=n.defaults(r.reverseRelation||{},this.options.reverseRelation),this.options=n.defaults(r,this.options,t.Relation.prototype.options),this.reverseRelation.type=n.isString(this.reverseRelation.type)?t[this.reverseRelation.type]||t.Relational.store.getObjectByName(this.reverseRelation.type):this.reverseRelation.type,this.key=this.options.key,this.keySource=this.options.keySource||this.key,this.keyDestination=this.options.keyDestination||this.keySource||this.key,this.model=this.options.model||this.instance.constructor,this.relatedModel=this.options.relatedModel,n.isFunction(this.relatedModel)&&!(this.relatedModel.prototype instanceof t.RelationalModel)&&(this.relatedModel=n.result(this,"relatedModel")),n.isString(this.relatedModel)&&(this.relatedModel=t.Relational.store.getObjectByName(this.relatedModel));if(!this.checkPreconditions())return;!this.options.isAutoRelation&&this.reverseRelation.type&&this.reverseRelation.key&&t.Relational.store.addReverseRelation(n.defaults({isAutoRelation:!0,model:this.relatedModel,relatedModel:this.model,reverseRelation:this.options},this.reverseRelation));if(e){var s=this.keySource;s!==this.key&&typeof this.instance.get(this.key)=="object"&&(s=this.key),this.setKeyContents(this.instance.get(s)),this.relatedCollection=t.Relational.store.getCollection(this.relatedModel),this.keySource!==this.key&&delete this.instance.attributes[this.keySource],this.instance._relations[this.key]=this,this.initialize(i),this.options.autoFetch&&this.instance.fetchRelated(this.key,n.isObject(this.options.autoFetch)?this.options.autoFetch:{}),this.listenTo(this.instance,"destroy",this.destroy).listenTo(this.relatedCollection,"relational:add relational:change:id",this.tryAddRelated).listenTo(this.relatedCollection,"relational:remove",this.removeRelated)}},t.Relation.extend=t.Model.extend,n.extend(t.Relation.prototype,t.Events,t.Semaphore,{options:{createModels:!0,includeInJSON:!0,isAutoRelation:!1,autoFetch:!1,parse:!1},instance:null,key:null,keyContents:null,relatedModel:null,relatedCollection:null,reverseRelation:null,related:null,checkPreconditions:function(){var e=this.instance,r=this.key,i=this.model,s=this.relatedModel,o=t.Relational.showWarnings&&typeof console!="undefined";if(!i||!r||!s)return o&&console.warn("Relation=%o: missing model, key or relatedModel (%o, %o, %o).",this,i,r,s),!1;if(i.prototype instanceof t.RelationalModel){if(s.prototype instanceof t.RelationalModel){if(this instanceof t.HasMany&&this.reverseRelation.type===t.HasMany)return o&&console.warn("Relation=%o: relation is a HasMany, and the reverseRelation is HasMany as well.",this),!1;if(e&&n.keys(e._relations).length){var u=n.find(e._relations,function(e){return e.key===r},this);if(u)return o&&console.warn("Cannot create relation=%o on %o for model=%o: already taken by relation=%o.",this,r,e,u),!1}return!0}return o&&console.warn("Relation=%o: relatedModel does not inherit from Backbone.RelationalModel (%o).",this,s),!1}return o&&console.warn("Relation=%o: model does not inherit from Backbone.RelationalModel (%o).",this,e),!1},setRelated:function(e){this.related=e,this.instance.attributes[this.key]=e},_isReverseRelation:function(e){return e.instance instanceof this.relatedModel&&this.reverseRelation.key===e.key&&this.key===e.reverseRelation.key},getReverseRelations:function(e){var t=[],r=n.isUndefined(e)?this.related&&(this.related.models||[this.related]):[e];return n.each(r||[],function(e){n.each(e.getRelations()||[],function(e){this._isReverseRelation(e)&&t.push(e)},this)},this),t},destroy:function(){this.stopListening(),this instanceof t.HasOne?this.setRelated(null):this instanceof t.HasMany&&this.setRelated(this._prepareCollection()),n.each(this.getReverseRelations(),function(e){e.removeRelated(this.instance)},this)}}),t.HasOne=t.Relation.extend({options:{reverseRelation:{type:"HasMany"}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange);var t=this.findRelated(e);this.setRelated(t),n.each(this.getReverseRelations(),function(t){t.addRelated(this.instance,e)},this)},findRelated:function(e){var t=null;e=n.defaults({parse:this.options.parse},e);if(this.keyContents instanceof this.relatedModel)t=this.keyContents;else if(this.keyContents||this.keyContents===0){var r=n.defaults({create:this.options.createModels},e);t=this.relatedModel.findOrCreate(this.keyContents,r)}return t&&(this.keyId=null),t},setKeyContents:function(e){this.keyContents=e,this.keyId=t.Relational.store.resolveIdForItem(this.relatedModel,this.keyContents)},onChange:function(e,r,i){if(this.isLocked())return;this.acquire(),i=i?n.clone(i):{};var s=n.isUndefined(i.__related),o=s?this.related:i.__related;if(s){this.setKeyContents(r);var u=this.findRelated(i);this.setRelated(u)}o&&this.related!==o&&n.each(this.getReverseRelations(o),function(e){e.removeRelated(this.instance,null,i)},this),n.each(this.getReverseRelations(),function(e){e.addRelated(this.instance,i)},this);if(!i.silent&&this.related!==o){var a=this;this.changed=!0,t.Relational.eventQueue.add(function(){a.instance.trigger("change:"+a.key,a.instance,a.related,i,!0),a.changed=!1})}this.release()},tryAddRelated:function(e,t,n){(this.keyId||this.keyId===0)&&e.id===this.keyId&&(this.addRelated(e,n),this.keyId=null)},addRelated:function(e,t){var r=this;e.queue(function(){if(e!==r.related){var i=r.related||null;r.setRelated(e),r.onChange(r.instance,e,n.defaults({__related:i},t))}})},removeRelated:function(e,t,r){if(!this.related)return;if(e===this.related){var i=this.related||null;this.setRelated(null),this.onChange(this.instance,e,n.defaults({__related:i},r))}}}),t.HasMany=t.Relation.extend({collectionType:null,options:{reverseRelation:{type:"HasOne"},collectionType:t.Collection,collectionKey:!0,collectionOptions:{}},initialize:function(e){this.listenTo(this.instance,"relational:change:"+this.key,this.onChange),this.collectionType=this.options.collectionType,n.isFunction(this.collectionType)&&this.collectionType!==t.Collection&&!(this.collectionType.prototype instanceof t.Collection)&&(this.collectionType=n.result(this,"collectionType")),n.isString(this.collectionType)&&(this.collectionType=t.Relational.store.getObjectByName(this.collectionType));if(!(this.collectionType===t.Collection||this.collectionType.prototype instanceof t.Collection))throw new Error("`collectionType` must inherit from Backbone.Collection");var r=this.findRelated(e);this.setRelated(r)},_prepareCollection:function(e){this.related&&this.stopListening(this.related);if(!e||!(e instanceof t.Collection)){var r=n.isFunction(this.options.collectionOptions)?this.options.collectionOptions(this.instance):this.options.collectionOptions;e=new this.collectionType(null,r)}e.model=this.relatedModel;if(this.options.collectionKey){var i=this.options.collectionKey===!0?this.options.reverseRelation.key:this.options.collectionKey;e[i]&&e[i]!==this.instance?t.Relational.showWarnings&&typeof console!="undefined"&&console.warn("Relation=%o; collectionKey=%s already exists on collection=%o",this,i,this.options.collectionKey):i&&(e[i]=this.instance)}return this.listenTo(e,"relational:add",this.handleAddition).listenTo(e,"relational:remove",this.handleRemoval).listenTo(e,"relational:reset",this.handleReset),e},findRelated:function(e){var r=null;e=n.defaults({parse:this.options.parse},e);if(this.keyContents instanceof t.Collection)this._prepareCollection(this.keyContents),r=this.keyContents;else{var i=[];n.each(this.keyContents,function(t){if(t instanceof this.relatedModel)var r=t;else r=this.relatedModel.findOrCreate(t,n.extend({merge:!0},e,{create:this.options.createModels}));r&&i.push(r)},this),this.related instanceof t.Collection?r=this.related:r=this._prepareCollection(),r.set(i,n.defaults({merge:!1,parse:!1},e))}return this.keyIds=n.difference(this.keyIds,n.pluck(r.models,"id")),r},setKeyContents:function(e){this.keyContents=e instanceof t.Collection?e:null,this.keyIds=[],!this.keyContents&&(e||e===0)&&(this.keyContents=n.isArray(e)?e:[e],n.each(this.keyContents,function(e){var n=t.Relational.store.resolveIdForItem(this.relatedModel,e);(n||n===0)&&this.keyIds.push(n)},this))},onChange:function(e,r,i){i=i?n.clone(i):{},this.setKeyContents(r),this.changed=!1;var s=this.findRelated(i);this.setRelated(s);if(!i.silent){var o=this;t.Relational.eventQueue.add(function(){o.changed&&(o.instance.trigger("change:"+o.key,o.instance,o.related,i,!0),o.changed=!1)})}},handleAddition:function(e,r,i){i=i?n.clone(i):{},this.changed=!0,n.each(this.getReverseRelations(e),function(e){e.addRelated(this.instance,i)},this);var s=this;!i.silent&&t.Relational.eventQueue.add(function(){s.instance.trigger("add:"+s.key,e,s.related,i)})},handleRemoval:function(e,r,i){i=i?n.clone(i):{},this.changed=!0,n.each(this.getReverseRelations(e),function(e){e.removeRelated(this.instance,null,i)},this);var s=this;!i.silent&&t.Relational.eventQueue.add(function(){s.instance.trigger("remove:"+s.key,e,s.related,i)})},handleReset:function(e,r){var i=this;r=r?n.clone(r):{},!r.silent&&t.Relational.eventQueue.add(function(){i.instance.trigger("reset:"+i.key,i.related,r)})},tryAddRelated:function(e,t,r){var i=n.contains(this.keyIds,e.id);i&&(this.addRelated(e,r),this.keyIds=n.without(this.keyIds,e.id))},addRelated:function(e,t){var r=this;e.queue(function(){r.related&&!r.related.get(e)&&r.related.add(e,n.defaults({parse:!1},t))})},removeRelated:function(e,t,n){this.related.get(e)&&this.related.remove(e,n)}}),t.RelationalModel=t.Model.extend({relations:null,_relations:null,_isInitialized:!1,_deferProcessing:!1,_queue:null,_attributeChangeFired:!1,subModelTypeAttribute:"type",subModelTypes:null,constructor:function(e,r){if(r&&r.collection){var i=this,s=this.collection=r.collection;delete r.collection,this._deferProcessing=!0;var o=function(e){e===i&&(i._deferProcessing=!1,i.processQueue(),s.off("relational:add",o))};s.on("relational:add",o),n.defer(function(){o(i)})}t.Relational.store.processOrphanRelations(),t.Relational.store.listenTo(this,"relational:unregister",t.Relational.store.unregister),this._queue=new t.BlockingQueue,this._queue.block(),t.Relational.eventQueue.block();try{t.Model.apply(this,arguments)}finally{t.Relational.eventQueue.unblock()}},trigger:function(e){if(e.length>5&&e.indexOf("change")===0){var n=this,r=arguments;t.Relational.eventQueue.isLocked()?t.Relational.eventQueue.add(function(){var i=!0;if(e==="change")i=n.hasChanged()||n._attributeChangeFired,n._attributeChangeFired=!1;else{var s=e.slice(7),o=n.getRelation(s);o?(i=r[4]===!0,i?n.changed[s]=r[2]:o.changed||delete n.changed[s]):i&&(n._attributeChangeFired=!0)}i&&t.Model.prototype.trigger.apply(n,r)}):t.Model.prototype.trigger.apply(n,r)}else e==="destroy"?(t.Model.prototype.trigger.apply(this,arguments),t.Relational.store.unregister(this)):t.Model.prototype.trigger.apply(this,arguments);return this},initializeRelations:function(e){this.acquire(),this._relations={},n.each(this.relations||[],function(n){t.Relational.store.initializeRelation(this,n,e)},this),this._isInitialized=!0,this.release(),this.processQueue()},updateRelations:function(e,t){this._isInitialized&&!this.isLocked()&&n.each(this._relations,function(n){if(!e||n.keySource in e||n.key in e){var r=this.attributes[n.keySource]||this.attributes[n.key],i=e&&(e[n.keySource]||e[n.key]);(n.related!==r||r===null&&i===null)&&this.trigger("relational:change:"+n.key,this,r,t||{})}n.keySource!==n.key&&delete this.attributes[n.keySource]},this)},queue:function(e){this._queue.add(e)},processQueue:function(){this._isInitialized&&!this._deferProcessing&&this._queue.isBlocked()&&this._queue.unblock()},getRelation:function(e){return this._relations[e]},getRelations:function(){return n.values(this._relations)},fetchRelated:function(e,r,i){r=n.extend({update:!0,remove:!1},r);var s,o,u=[],a=this.getRelation(e),f=a&&(a.keyIds&&a.keyIds.slice(0)||(a.keyId||a.keyId===0?[a.keyId]:[]));i&&(s=a.related instanceof t.Collection?a.related.models:[a.related],n.each(s,function(e){(e.id||e.id===0)&&f.push(e.id)}));if(f&&f.length){var l=[];s=n.map(f,function(e){var t=a.relatedModel.findModel(e);if(!t){var n={};n[a.relatedModel.prototype.idAttribute]=e,t=a.relatedModel.findOrCreate(n,r),l.push(t)}return t},this),a.related instanceof t.Collection&&n.isFunction(a.related.url)&&(o=a.related.url(s));if(o&&o!==a.related.url()){var c=n.defaults({error:function(){var e=arguments;n.each(l,function(t){t.trigger("destroy",t,t.collection,r),r.error&&r.error.apply(t,e)})},url:o},r);u=[a.related.fetch(c)]}else u=n.map(s,function(e){var t=n.defaults({error:function(){n.contains(l,e)&&(e.trigger("destroy",e,e.collection,r),r.error&&r.error.apply(e,arguments))}},r);return e.fetch(t)},this)}return u},get:function(e){var r=t.Model.prototype.get.call(this,e);if(!this.dotNotation||e.indexOf(".")===-1)return r;var i=e.split("."),s=n.reduce(i,function(e,r){if(n.isNull(e)||n.isUndefined(e))return undefined;if(e instanceof t.Model)return t.Model.prototype.get.call(e,r);if(e instanceof t.Collection)return t.Collection.prototype.at.call(e,r);throw new Error("Attribute must be an instanceof Backbone.Model or Backbone.Collection. Is: "+e+", currentSplit: "+r)},this);if(r!==undefined&&s!==undefined)throw new Error("Ambiguous result for '"+e+"'. direct result: "+r+", dotNotation: "+s);return r||s},set:function(e,r,i){t.Relational.eventQueue.block();var s;n.isObject(e)||e==null?(s=e,i=r):(s={},s[e]=r);try{var o=this.id,u=s&&this.idAttribute in s&&s[this.idAttribute];t.Relational.store.checkId(this,u);var a=t.Model.prototype.set.apply(this,arguments);!this._isInitialized&&!this.isLocked()?(this.constructor.initializeModelHierarchy(),(u||u===0)&&t.Relational.store.register(this),this.initializeRelations(i)):u&&u!==o&&t.Relational.store.update(this),s&&this.updateRelations(s,i)}finally{t.Relational.eventQueue.unblock()}return a},clone:function(){var e=n.clone(this.attributes);return n.isUndefined(e[this.idAttribute])||(e[this.idAttribute]=null),n.each(this.getRelations(),function(t){delete e[t.key]}),new this.constructor(e)},toJSON:function(e){if(this.isLocked())return this.id;this.acquire();var r=t.Model.prototype.toJSON.call(this,e);return this.constructor._superModel&&!(this.constructor._subModelTypeAttribute in r)&&(r[this.constructor._subModelTypeAttribute]=this.constructor._subModelTypeValue),n.each(this._relations,function(i){var s=r[i.key],o=i.options.includeInJSON,u=null;o===!0?s&&n.isFunction(s.toJSON)&&(u=s.toJSON(e)):n.isString(o)?(s instanceof t.Collection?u=s.pluck(o):s instanceof t.Model&&(u=s.get(o)),o===i.relatedModel.prototype.idAttribute&&(i instanceof t.HasMany?u=u.concat(i.keyIds):i instanceof t.HasOne&&(u=u||i.keyId,!u&&!n.isObject(i.keyContents)&&(u=i.keyContents||null)))):n.isArray(o)?s instanceof t.Collection?(u=[],s.each(function(e){var t={};n.each(o,function(n){t[n]=e.get(n)}),u.push(t)})):s instanceof t.Model&&(u={},n.each(o,function(e){u[e]=s.get(e)})):delete r[i.key],o&&(r[i.keyDestination]=u),i.keyDestination!==i.key&&delete r[i.key]}),this.release(),r}},{setup:function(e){return this.prototype.relations=(this.prototype.relations||[]).slice(0),this._subModels={},this._superModel=null,this.prototype.hasOwnProperty("subModelTypes")?t.Relational.store.addSubModels(this.prototype.subModelTypes,this):this.prototype.subModelTypes=null,n.each(this.prototype.relations||[],function(e){e.model||(e.model=this);if(e.reverseRelation&&e.model===this){var r=!0;if(n.isString(e.relatedModel)){var i=t.Relational.store.getObjectByName(e.relatedModel);r=i&&i.prototype instanceof t.RelationalModel}r?t.Relational.store.initializeRelation(null,e):n.isString(e.relatedModel)&&t.Relational.store.addOrphanRelation(e)}},this),this},build:function(e,t){this.initializeModelHierarchy();var n=this._findSubModelType(this,e)||this;return new n(e,t)},_findSubModelType:function(e,t){if(e._subModels&&e.prototype.subModelTypeAttribute in t){var n=t[e.prototype.subModelTypeAttribute],r=e._subModels[n];if(r)return r;for(n in e._subModels){r=this._findSubModelType(e._subModels[n],t);if(r)return r}}return null},initializeModelHierarchy:function(){this.inheritRelations();if(this.prototype.subModelTypes){var e=n.keys(this._subModels),r=n.omit(this.prototype.subModelTypes,e);n.each(r,function(e){var n=t.Relational.store.getObjectByName(e);n&&n.initializeModelHierarchy()})}},inheritRelations:function(){if(!n.isUndefined(this._superModel)&&!n.isNull(this._superModel))return;t.Relational.store.setupSuperModel(this);if(this._superModel){this._superModel.inheritRelations();if(this._superModel.prototype.relations){var e=n.filter(this._superModel.prototype.relations||[],function(e){return!n.any(this.prototype.relations||[],function(t){return e.relatedModel===t.relatedModel&&e.key===t.key},this)},this);this.prototype.relations=e.concat(this.prototype.relations)}}else this._superModel=!1},findOrCreate:function(e,t){t||(t={});var r=n.isObject(e)&&t.parse&&this.prototype.parse?this.prototype.parse(n.clone(e)):e,i=this.findModel(r);return n.isObject(e)&&(i&&t.merge!==!1?(delete t.collection,delete t.url,i.set(r,t)):!i&&t.create!==!1&&(i=this.build(r,n.defaults({parse:!1},t)))),i},find:function(e,t){return t||(t={}),t.create=!1,this.findOrCreate(e,t)},findModel:function(e){return t.Relational.store.find(this,e)}}),n.extend(t.RelationalModel.prototype,t.Semaphore),t.Collection.prototype.__prepareModel=t.Collection.prototype._prepareModel,t.Collection.prototype._prepareModel=function(e,r){var i;return e instanceof t.Model?(e.collection||(e.collection=this),i=e):(r=r?n.clone(r):{},r.collection=this,typeof this.model.findOrCreate!="undefined"?i=this.model.findOrCreate(e,r):i=new this.model(e,r),i&&i.validationError&&(this.trigger("invalid",this,e,r),i=!1)),i};var r=t.Collection.prototype.__set=t.Collection.prototype.set;t.Collection.prototype.set=function(e,i){if(this.model.prototype instanceof t.RelationalModel){i&&i.parse&&(e=this.parse(e,i));var s=!n.isArray(e),o=[],u=[];e=s?e?[e]:[]:n.clone(e),n.each(e,function(e){e instanceof t.Model||(e=t.Collection.prototype._prepareModel.call(this,e,i)),e&&(u.push(e),!this.get(e)&&!this.get(e.cid)?o.push(e):e.id!=null&&(this._byId[e.id]=e))},this),u=s?u.length?u[0]:null:u;var a=r.call(this,u,n.defaults({parse:!1},i));return n.each(o,function(e){(this.get(e)||this.get(e.cid))&&this.trigger("relational:add",e,this,i)},this),a}return r.apply(this,arguments)};var i=t.Collection.prototype.__remove=t.Collection.prototype.remove;t.Collection.prototype.remove=function(e,r){if(this.model.prototype instanceof t.RelationalModel){var s=!n.isArray(e),o=[];e=s?e?[e]:[]:n.clone(e),r||(r={}),n.each(e,function(e){e=this.get(e)||e&&this.get(e.cid),e&&o.push(e)},this);var u=i.call(this,s?o.length?o[0]:null:o,r);return n.each(o,function(e){this.trigger("relational:remove",e,this,r)},this),u}return i.apply(this,arguments)};var s=t.Collection.prototype.__reset=t.Collection.prototype.reset;t.Collection.prototype.reset=function(e,r){r=n.extend({merge:!0},r);var i=s.call(this,e,r);return this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,r),i};var o=t.Collection.prototype.__sort=t.Collection.prototype.sort;t.Collection.prototype.sort=function(e){var n=o.call(this,e);return this.model.prototype instanceof t.RelationalModel&&this.trigger("relational:reset",this,e),n};var u=t.Collection.prototype.__trigger=t.Collection.prototype.trigger;t.Collection.prototype.trigger=function(e){if(this.model.prototype instanceof t.RelationalModel){if(e==="add"||e==="remove"||e==="reset"||e==="sort"){var r=this,i=arguments;n.isObject(i[3])&&(i=n.toArray(i),i[3]=n.clone(i[3])),t.Relational.eventQueue.add(function(){u.apply(r,i)})}else u.apply(this,arguments);return this}return u.apply(this,arguments)},t.RelationalModel.extend=function(e,n){var r=t.Model.extend.apply(this,arguments);return r.setup(this),r}}),function(){"use strict";define("aura_extensions/backbone-relational",["vendor/backbone-relational/backbone-relational"],function(){return{name:"relationalmodel",initialize:function(e){var t=e.core,n=e.sandbox;t.mvc.relationalModel=Backbone.RelationalModel,n.mvc.relationalModel=function(e){return t.mvc.relationalModel.extend(e)},define("mvc/relationalmodel",function(){return n.mvc.relationalModel}),n.mvc.HasMany=Backbone.HasMany,n.mvc.HasOne=Backbone.HasOne,define("mvc/hasmany",function(){return n.mvc.HasMany}),define("mvc/hasone",function(){return n.mvc.HasOne}),n.mvc.Store=Backbone.Relational.store,define("mvc/relationalstore",function(){return n.mvc.Store})}}})}(),define("aura_extensions/sulu-content",[],function(){"use strict";var e={layout:{navigation:{collapsed:!1,hidden:!1},content:{width:"fixed",leftSpace:!0,rightSpace:!0,topSpace:!0},sidebar:!1}},t=function(e,t,r){var i,s,o;try{i=JSON.parse(e)}catch(u){i=e}this.sandbox.emit("navigation.url",function(e){var u=[];this.sandbox.util.foreach(i,function(r){s=r.display.indexOf("new")>=0,o=r.display.indexOf("edit")>=0;if(!t&&s||t&&o)r.action=n.call(this,r.action,e,t),r.action===e&&(r.selected=!0),u.push(r)}.bind(this)),!r||typeof r!="function"?this.sandbox.emit("navigation.item.column.show",{data:u}):r(u)}.bind(this))},n=function(e,t,n){if(e.substr(0,1)==="/")return e.substr(1,e.length);if(n){var r="edit:"+n;t=t.substr(0,t.indexOf(r)+r.length)}return t+"/"+e},r=function(e){this.sandbox.emit("sulu.view.initialize",e)},i=function(t){typeof t=="function"&&(t=t.call(this)),t.changeNothing||(t=this.sandbox.util.extend(!0,{},e.layout,t),s.call(this,t.navigation),o.call(this,t.content),u.call(this,t.sidebar))},s=function(e){e.collapsed===!0?this.sandbox.emit("husky.navigation.collapse",!0):this.sandbox.emit("husky.navigation.uncollapse"),e.hidden===!0?this.sandbox.emit("husky.navigation.hide"):this.sandbox.emit("husky.navigation.show")},o=function(e){var t=e.width,n=!!e.leftSpace,r=!!e.rightSpace,i=!!e.topSpace;this.sandbox.emit("sulu.app.change-width",t),this.sandbox.emit("sulu.app.change-spacing",n,r,i),this.sandbox.emit("sulu.app.toggle-shrinker",!1)},u=function(e){!e||!e.url?this.sandbox.emit("sulu.sidebar.empty"):this.sandbox.emit("sulu.sidebar.set-widget",e.url);if(!e)this.sandbox.emit("sulu.sidebar.hide");else{var t=e.width||"max";this.sandbox.emit("sulu.sidebar.change-width",t)}this.sandbox.emit("sulu.sidebar.reset-classes"),!!e&&!!e.cssClasses&&this.sandbox.emit("sulu.sidebar.add-classes",e.cssClasses)},a=function(e){typeof e=="function"&&(e=e.call(this)),e.then?e.then(function(e){f.call(this,e)}.bind(this)):f.call(this,e)},f=function(e){var n,r,i;n=this.sandbox.dom.createElement('<div id="sulu-content-container"/>'),this.html(n),r=function(t){var r=!0;!e.toolbar||(r=e.toolbar.languageChanger?e.toolbar.languageChanger:!1),i={tabsData:t,heading:this.sandbox.translate(e.title),breadcrumb:e.breadcrumb?e.breadcrumb:null,toolbarTemplate:!e.toolbar||!e.toolbar.template?"default":e.toolbar.template,toolbarParentTemplate:!e.toolbar||!e.toolbar.parentTemplate?null:e.toolbar.parentTemplate,contentComponentOptions:this.options,contentEl:n,toolbarOptions:!e.toolbar||!e.toolbar.options?{}:e.toolbar.options,tabsOptions:!e.tabs||!e.tabs.options?{}:e.tabs.options,tabsFullControl:!e.tabs||typeof e.tabs.fullControl!="boolean"?!1:e.tabs.fullControl,toolbarDisabled:typeof e.toolbar=="undefined",toolbarLanguageChanger:r,noBack:typeof e.noBack!="undefined"?e.noBack:!1,titleColor:e.titleColor?e.titleColor:null},e.tabs===!1&&(i.tabsOptions=!1),this.sandbox.emit("sulu.header.change",i)}.bind(this),!e.tabs||!e.tabs.url?r(null):this.sandbox.util.load(e.tabs.url).then(function(e){t.call(this,e,this.options.id,r)}.bind(this))};return function(e){e.components.before("initialize",function(){!this.header||a.call(this,this.header),!this.view||(r.call(this,this.view),this.layout||i.call(this,{})),!this.layout||i.call(this,this.layout)})}}),function(){"use strict";define("aura_extensions/sulu-extension",[],{initialize:function(e){e.sandbox.sulu={},e.sandbox.sulu.user=e.sandbox.util.extend(!1,{},SULU.user),e.sandbox.sulu.locales=SULU.locales,e.sandbox.sulu.user=e.sandbox.util.extend(!0,{},SULU.user),e.sandbox.sulu.userSettings=e.sandbox.util.extend(!0,{},SULU.user.settings);var t=function(e,t){var n=t?{}:[],r;for(r=0;r<e.length;r++)t?n[e[r].name]=r:n.push(e[r].name);return n},n="sulu.fields.loaded";e.sandbox.sulu.viewStates={},e.sandbox.sulu.unlockDeleteSuccessLabel=function(){e.sandbox.sulu.viewStates.nodeDeleted=!0},e.sandbox.sulu.triggerDeleteSuccessLabel=function(t){e.sandbox.sulu.viewStates.nodeDeleted===!0&&(t=t||"labels.success.content-deleted-desc",e.sandbox.emit("sulu.labels.success.show",t,"labels.success"),delete e.sandbox.sulu.viewStates.nodeDeleted)},e.sandbox.sulu.loadUserSetting=function(t,n,r){e.sandbox.sulu.userSettings[t]?r(e.sandbox.sulu.userSettings[t]):e.sandbox.util.load(n).then(function(n){e.sandbox.sulu.userSettings[t]=n,r(n)}.bind(this)).fail(function(t){e.sandbox.logger.log("data could not be loaded:",t)}.bind(this))},e.sandbox.sulu.loadUrlAndMergeWithSetting=function(r,i,s,o){this.sandbox.util.load(s).then(function(s){var u=e.sandbox.sulu.getUserSetting(r),a=s,f=[],l,c,h,p,d,v,m;u?(d=t.call(this,a),v=t.call(this,a),m=t.call(this,a,!0),p=t.call(this,u),this.sandbox.util.foreach(p,function(e,t){c=v.indexOf(e);if(c>=0){l=a[c];for(var n in u[t])i.indexOf(n)<0&&(l[n]=u[t][n]);f.push(l),h=d.indexOf(e),d.splice(h,1)}}.bind(this)),this.sandbox.util.foreach(d,function(e){f.push(a[m[e]])}.bind(this))):f=a,e.sandbox.sulu.userSettings[r]=f,e.sandbox.emit(n,s),o(f)}.bind(this))},e.sandbox.sulu.getUserSetting=function(t){return typeof e.sandbox.sulu.userSettings[t]!="undefined"?e.sandbox.sulu.userSettings[t]:null},e.sandbox.sulu.saveUserSetting=function(t,n,r){e.sandbox.sulu.userSettings[t]=n,r||(r="/admin/api/users/"+SULU.user.id+"/settings/"+t);var i={key:t,value:n};e.sandbox.util.ajax({type:"PUT",url:r,data:i,processData:!0,success:function(e){}.bind(this),error:function(t){e.sandbox.logger.log("error",t)}})},e.sandbox.sulu.showDeleteDialog=function(t,n,r){if(!!t&&typeof t!="function")throw"callback is not a function";n=typeof n=="string"?n:"sulu.overlay.be-careful",r=typeof r=="string"?r:"sulu.overlay.delete-desc",e.sandbox.emit("sulu.overlay.show-warning",n,r,function(){t(!1)}.bind(this),function(){t(!0)}.bind(this))};var r,i=function(e,t){return r?r=!1:e+=t,e},s=function(e,t){if(!!t){var n=e.indexOf("sortBy"),r=e.indexOf("sortOrder"),i="&";if(n===-1&&r===-1)return e.indexOf("?")===-1&&(i="?"),e+i+"sortBy="+t.attribute+"&sortOrder="+t.direction;if(n>-1&&r>-1)return e=e.replace(/(sortBy=(\w)+)/,"sortBy="+t.attribute),e=e.replace(/(sortOrder=(\w)+)/,"sortOrder="+t.direction),e;this.sandbox.logger.error("Invalid list url! Either sortBy or sortOrder or both are missing!")}return e},o=function(e,t){var n=e.dom.trim(e.dom.text(t));n=n.replace(/\s{2,}/g," "),e.dom.attr(t,"title",n),e.dom.html(t,e.util.cropMiddle(n,20))};e.sandbox.sulu.cropAllLabels=function(t,n){var r=e.sandbox;n||(n="crop");var i=r.dom.find("label."+n,t),s,u;for(s=-1,u=i.length;++s<u;)o(r,i[s])},e.sandbox.sulu.createAddressString=function(e){var t="";if(!e&&typeof e!="object")throw new Error("no valid address object");return r=!0,!e.street||(t=i(t,""),t+=e.street),!e.number||(t=i(t," "),t+=e.number),!e.addition||(t=i(t," - "),t+=e.addition),!e.zip||(t=i(t,", "),t+=e.zip),!e.city||(e.city?t=i(t," "):t=i(t,", "),t+=e.city),!e.state||(t=i(t,", "),t+=e.state),!e.country||(t=i(t,", "),typeof e.country=="string"?t+=e.country:t+=e.country.name),t},e.sandbox.sulu.initListToolbarAndList=function(e,t,n,r){var i=e+"Order",o=e+"Fields",u=e+"PageSize",a=this.sandbox.sulu.getUserSetting(u),f=this.sandbox.sulu.getUserSetting(i),l=typeof t=="string"?t:null,c=function(e){var t={columnOptions:{data:e,key:o,url:l},instanceName:"content",inHeader:!1},c=this.sandbox.util.extend(!0,{},t,n),h={view:"table",pagination:"dropdown",matchings:e,selectedCounter:!0,viewOptions:{table:{noItemsText:"public.empty-list",stickyHeader:!0}}},p={dropdown:{limit:a}},d;!a||(h.paginationOptions=p),d=this.sandbox.util.extend(!0,{},h,r),d.url=s(d.url,f),d.searchInstanceName=d.searchInstanceName||c.instanceName,d.columnOptionsInstanceName=d.columnOptionsInstanceName||c.instanceName,this.sandbox.start([{name:"list-toolbar@suluadmin",options:c},{name:"datagrid@husky",options:d}]),this.sandbox.on("husky.datagrid.page-size.changed",function(e){this.sandbox.sulu.saveUserSetting(u,e)}.bind(this)),this.sandbox.on("husky.datagrid.data.sort",function(e){this.sandbox.sulu.saveUserSetting(i,e)}.bind(this))};l?this.sandbox.sulu.loadUrlAndMergeWithSetting.call(this,o,["translation","default","editable","validation","width","type"],l,c.bind(this)):c.call(this,t)},e.sandbox.sulu.initList=function(e,t,n){this.sandbox.sulu.loadUrlAndMergeWithSetting.call(this,e,["translation","default","editable","validation","width","type"],t,function(e){var t={view:"table",pagination:"dropdown",selectedCounter:!0,matchings:e};t=this.sandbox.util.extend(!0,{},t,n),this.sandbox.start([{name:"datagrid@husky",options:t}])}.bind(this))}}})}(),function(){"use strict";define("aura_extensions/url-manager",["app-config"],function(e){return{name:"url-manager",initialize:function(t){var n=t.sandbox,r={};n.urlManager={},n.urlManager.setUrl=function(e,t,n){r[e]={template:t,handler:n}},n.urlManager.getUrl=function(t,i){var s=r[t],o;return s?(s.handler&&(i=s.handler.call(this,i)),_.extend(i,{languageCode:e.getUser().locale},{}),o=s.template,typeof o=="function"&&(o=s.template.call(this,i)),n.template.parse(o,i)):null}}}})}(),define("widget-groups",["config"],function(e){"use strict";var t=e.get("sulu_admin.widget_groups");return{exists:function(e){return e=e.replace("-","_"),!!t[e]&&!!t[e].mappings&&t[e].mappings.length>0}}}),define("__component__$app@suluadmin",[],function(){"use strict";var e,t={suluNavigateAMark:'[data-sulu-navigate="true"]',fixedWidthClass:"fixed",smallFixedClass:"small-fixed",maxWidthClass:"max",columnSelector:".content-column",noLeftSpaceClass:"no-left-space",noRightSpaceClass:"no-right-space",noTopSpaceClass:"no-top-space",shrinkIcon:"fa-chevron-left",expandIcon:"fa-chevron-right",noTransitionsClass:"no-transitions",versionHistoryUrl:"https://github.com/sulu-cmf/sulu-standard/releases",changeLanguageUrl:"/admin/security/profile/change-language"},n={shrinkable:'<div class="sulu-app-shrink"><span class="fa-chevron-left"></span></div>'},r="sulu.app.",i=function(){return l("initialized")},s=function(){return l("has-started")},o=function(){return l("change-user-locale")},u=function(){return l("change-width")},a=function(){return l("change-spacing")},f=function(){return l("toggle-shrinker")},l=function(e){return r+e};return{name:"Sulu App",initialize:function(){this.title=document.title,this.$shrinker=null,this.currentRoute=null,this.initializeRouter(),this.render(),this.bindCustomEvents(),this.bindDomEvents(),!!this.sandbox.mvc.history.fragment&&this.sandbox.mvc.history.fragment.length>0&&this.selectNavigationItem(this.sandbox.mvc.history.fragment),this.sandbox.emit(i.call(this)),this.sandbox.util.ajaxError(function(e,t){switch(t.status){case 401:window.location.replace("/admin/login");break;case 403:this.sandbox.emit("sulu.labels.error.show","public.forbidden","public.forbidden.description","")}}.bind(this))},extractErrorMessage:function(e){var t=[e.status];if(e.responseJSON!==undefined){var n=e.responseJSON;this.sandbox.util.each(n,function(e){var r=n[e];r.message!==undefined&&t.push(r.message)})}return t.join(", ")},initializeRouter:function(){var t=this.sandbox.mvc.Router({routes:{"*actions":"defaultAction"},defaultAction:function(){}});e=new t,this.sandbox.util._.each(this.sandbox.mvc.routes,function(t){e.route(t.route,function(){this.sandbox.mvc.Store.reset(),this.beforeNavigateCleanup(t),t.callback.apply(this,arguments)}.bind(this))}.bind(this))},selectNavigationItem:function(e){this.sandbox.emit("husky.navigation.select-item",e)},render:function(){var e=this.sandbox.dom.find(t.columnSelector);this.$shrinker=this.sandbox.dom.createElement(n.shrinkable),this.sandbox.dom.hide(this.$shrinker),this.sandbox.dom.append(e,this.$shrinker)},bindDomEvents:function(){this.sandbox.dom.on(this.sandbox.dom.$document,"click",function(e){this.sandbox.dom.preventDefault(e);var t=this.sandbox.dom.attr(e.currentTarget,"data-sulu-event"),n=this.sandbox.dom.data(e.currentTarget,"eventArgs");!!t&&typeof t=="string"&&this.sandbox.emit(t,n),!!e.currentTarget.attributes.href&&!!e.currentTarget.attributes.href.value&&e.currentTarget.attributes.href.value!=="#"&&this.emitNavigationEvent({action:e.currentTarget.attributes.href.value},!0,!0)}.bind(this),"a"+t.suluNavigateAMark),this.sandbox.dom.on(this.$shrinker,"click",this.toggleShrinkColumn.bind(this))},navigate:function(t,n,r,i){n=typeof n!="undefined"?n:!0,i=i===!0,i&&(this.sandbox.mvc.history.fragment=null),e.navigate(t,{trigger:n}),this.sandbox.dom.scrollTop(this.sandbox.dom.$window,0)},beforeNavigateCleanup:function(e){this.currentRoute=e,App.emit("sulu.header.hide"),App.stop("#sulu-content-container"),App.stop("#content > *"),App.stop("#sidebar > *"),app.cleanUp()},bindCustomEvents:function(){this.sandbox.on("sulu.router.navigate",this.navigate.bind(this)),this.sandbox.on("husky.navigation.item.select",function(e){this.emitNavigationEvent(e,!1),e.parentTitle?this.setTitlePostfix(this.sandbox.translate(e.parentTitle)):!e.title||this.setTitlePostfix(this.sandbox.translate(e.title))}.bind(this)),this.sandbox.on("husky.data-navigation.select",function(e){!!e&&!!e._links&&!!e._links.admin&&this.sandbox.emit("sulu.router.navigate",e._links.admin.href,!0,!1)}.bind(this)),this.sandbox.on("husky.tabs.content.item.select",function(e){this.emitNavigationEvent(e,!0)}.bind(this)),this.sandbox.on("husky.tabs.header.item.select",function(e){this.emitNavigationEvent(e,!0)}.bind(this)),this.sandbox.on("navigation.url",function(e){e(this.sandbox.mvc.history.fragment)},this),this.sandbox.on(s.call(this),function(e){e(!0)}.bind(this)),this.sandbox.on("husky.navigation.initialized",function(){!!this.sandbox.mvc.history.fragment&&this.sandbox.mvc.history.fragment.length>0&&this.selectNavigationItem(this.sandbox.mvc.history.fragment)}.bind(this)),this.sandbox.on("husky.navigation.version-history.clicked",function(){window.open(t.versionHistoryUrl,"_blank")}.bind(this)),this.sandbox.on("husky.navigation.user-locale.changed",this.changeUserLocale.bind(this)),this.sandbox.on("husky.navigation.username.clicked",this.routeToUserForm.bind(this)),this.sandbox.on(o.call(this),this.changeUserLocale.bind(this)),this.sandbox.on(u.call(this),this.changeWidth.bind(this)),this.sandbox.on(a.call(this),this.changeSpacing.bind(this)),this.sandbox.on(f.call(this),this.toggleShrinker.bind(this))},toggleShrinker:function(e){e===!0?this.sandbox.dom.show(this.$shrinker):this.sandbox.dom.hide(this.$shrinker)},toggleShrinkColumn:function(){var e=this.sandbox.dom.find(t.columnSelector);this.sandbox.dom.removeClass(e,t.noTransitionsClass),this.sandbox.dom.hasClass(e,t.smallFixedClass)?(this.sandbox.emit("husky.navigation.show"),this.sandbox.dom.removeClass(e,t.smallFixedClass),this.sandbox.dom.removeClass(this.sandbox.dom.find("span",this.$shrinker),t.expandIcon),this.sandbox.dom.addClass(this.sandbox.dom.find("span",this.$shrinker),t.shrinkIcon)):(this.sandbox.emit("husky.navigation.hide"),this.sandbox.dom.addClass(e,t.smallFixedClass),this.sandbox.dom.removeClass(this.sandbox.dom.find("span",this.$shrinker),t.shrinkIcon),this.sandbox.dom.addClass(this.sandbox.dom.find("span",this.$shrinker),t.expandIcon))},changeSpacing:function(e,n,r){var i=this.sandbox.dom.find(t.columnSelector);this.sandbox.dom.addClass(i,t.noTransitionsClass),e===!1?this.sandbox.dom.addClass(this.$el,t.noLeftSpaceClass):this.sandbox.dom.removeClass(this.$el,t.noLeftSpaceClass),n===!1?this.sandbox.dom.addClass(this.$el,t.noRightSpaceClass):this.sandbox.dom.removeClass(this.$el,t.noRightSpaceClass),r===!1?this.sandbox.dom.addClass(this.$el,t.noTopSpaceClass):this.sandbox.dom.removeClass(this.$el,t.noTopSpaceClass)},changeWidth:function(e){var n=this.sandbox.dom.find(t.columnSelector);this.sandbox.dom.removeClass(n,t.noTransitionsClass),e==="fixed"?this.changeToFixedWidth(!1):e==="max"?this.changeToMaxWidth():e==="fixed-small"&&this.changeToFixedWidth(!0),this.sandbox.dom.trigger(this.sandbox.dom.window,"resize")},changeToFixedWidth:function(e){var n=this.sandbox.dom.find(t.columnSelector);this.sandbox.dom.hasClass(n,t.fixedWidthClass)||(this.sandbox.dom.removeClass(n,t.maxWidthClass),this.sandbox.dom.addClass(n,t.fixedWidthClass)),e===!0?this.sandbox.dom.addClass(n,t.smallFixedClass):this.sandbox.dom.removeClass(n,t.smallFixedClass)},changeToMaxWidth:function(){var e=this.sandbox.dom.find(t.columnSelector);this.sandbox.dom.hasClass(e,t.maxWidthClass)||(this.sandbox.dom.removeClass(e,t.smallFixedClass),this.sandbox.dom.removeClass(e,t.fixedWidthClass),this.sandbox.dom.addClass(e,t.maxWidthClass))},changeUserLocale:function(e){this.sandbox.util.ajax({type:"POST",url:t.changeLanguageUrl,contentType:"application/json",dataType:"json",data:JSON.stringify({locale:e}),success:function(){this.sandbox.dom.window.location.reload()}.bind(this)})},routeToUserForm:function(){this.navigate("contacts/contacts/edit:"+this.sandbox.sulu.user.contact.id+"/details",!0,!1,!1),this.sandbox.emit("husky.navigation.select-item","contacts/contacts")},setTitlePostfix:function(e){document.title=this.title+" - "+e},emitNavigationEvent:function(e,t,n){n===!0&&this.selectNavigationItem(e.action),!e.action||this.sandbox.emit("sulu.router.navigate",e.action,e.forceReload,t)}}}),define("__component__$content-tabs@suluadmin",[],function(){"use strict";var e={instanceName:"content",contentOptions:{},tabsData:null},t={tabsComponentId:"content-tabs-component"},n={skeleton:function(){return['<div id="content-tabs"></div>'].join("")}},r=function(){return i.call(this,"initialized")},i=function(e){return"sulu.content-tabs."+(this.options.instanceName?this.options.instanceName+".":"")+e};return{initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options);var t=this.sandbox.util.template(n.skeleton.call(this));this.$el.html(t),this.bindCustomEvents(),this.sandbox.emit(r.call(this))},bindCustomEvents:function(){this.sandbox.on("husky.tabs.header.initialized",this.startTabComponent.bind(this)),this.sandbox.on("husky.tabs.header.item.select",this.startTabComponent.bind(this)),this.sandbox.on("husky.tabs.header.option.unset",this.unsetOption.bind(this))},unsetOption:function(e){this.options.contentOptions[e]=null},startTabComponent:function(e){var n;e=e||this.options.tabsData.items[0];if(!e.forceReload&&e.action===this.action)return this.sandbox.logger.log("page already loaded; no reload required!"),!1;this.action=e.action,!e.resetStore||this.sandbox.mvc.Store.reset(),App.stop("#"+t.tabsComponentId),!e.component||(this.sandbox.dom.append(this.$el,this.sandbox.dom.createElement('<div id="'+t.tabsComponentId+'"/>')),n=this.sandbox.util.extend(!0,{},this.options.contentOptions,{el:"#"+t.tabsComponentId},e.componentOptions),this.sandbox.start([{name:e.component,options:n}]))}}}),define("__component__$overlay@suluadmin",[],function(){"use strict";var e=function(e){return"sulu.overlay."+e},t=function(){return e.call(this,"initialized")},n=function(){return e.call(this,"canceled")},r=function(){return e.call(this,"confirmed")},i=function(){return e.call(this,"show-error")},s=function(){return e.call(this,"show-warning")};return{initialize:function(){this.bindCustomEvents(),this.sandbox.emit(t.call(this))},bindCustomEvents:function(){this.sandbox.on(i.call(this),this.showError.bind(this)),this.sandbox.on(s.call(this),this.showWarning.bind(this))},showError:function(e,t,n,r){this.startOverlay(this.sandbox.util.extend(!0,{},{title:this.sandbox.translate(e),message:this.sandbox.translate(t),closeCallback:n,type:"error"},r))},showWarning:function(e,t,n,r,i){this.startOverlay(this.sandbox.util.extend(!0,{},{title:this.sandbox.translate(e),message:this.sandbox.translate(t),closeCallback:n,okCallback:r,type:"warning"},i))},startOverlay:function(e){var t=this.sandbox.dom.createElement("<div/>"),i;this.sandbox.dom.append(this.$el,t),i={el:t,cancelCallback:function(){this.sandbox.emit(n.call(this))}.bind(this),okCallback:function(){this.sandbox.emit(r.call(this))}.bind(this)},e=this.sandbox.util.extend(!0,{},i,e),this.sandbox.start([{name:"overlay@husky",options:e}])}}}),define("__component__$header@suluadmin",[],function(){"use strict";var e={heading:"",toolbarTemplate:"default",toolbarParentTemplate:null,instanceName:"",changeStateCallback:null,parentChangeStateCallback:null,tabsData:null,contentComponentOptions:{},contentEl:null,toolbarOptions:{},toolbarLanguageChanger:!0,tabsOptions:{},tabsFullControl:!1,breadcrumb:null,toolbarDisabled:!1,noBack:!1,titleColor:null},t={componentClass:"sulu-header",headerBackgroundSelector:".sulu-header-background",hasTabsClass:"has-tabs",titleColorClass:"title-color",titleColorSetClass:"color-set",infoClass:"info",headlineClass:"headline",backClass:"back",backIcon:"chevron-left",toolbarClass:"toolbar",tabsClass:"tabs",innerSelector:".inner",tabsSelector:".tabs-container",bottomContentClass:"bottom-content",toolbarDefaults:{groups:[{id:"left",align:"left"},{id:"right",align:"right"}]},languageChangerDefaults:{id:"language",iconSize:"large",group:"right",position:10,type:"select",title:"","class":"highlight-white"}},n={skeleton:['<div class="inner">','<div class="'+t.infoClass+'"></div>','<div class="'+t.headlineClass+'">','<span class="fa-'+t.backIcon+" "+t.backClass+'"></span>','<span class="'+t.titleColorClass+'"></span>','<h1 class="bright"></h1>',"</div>",'<div class="bottom-row">','   <div class="'+t.bottomContentClass+'"></div>','   <div class="'+t.toolbarClass+'"></div>',"</div>","</div>"].join(""),breadcrumbItem:['<li<% if(inactive === true) { %> class="inactive"<% } %>>','<a data-sulu-navigate="true" data-sulu-event="<%= event %>" href="<%= link %>"><%= title %></a>',"</li>"].join("\n")},r=function(e){return"sulu.header."+(this.options.instanceName?this.options.instanceName+".":"")+e},i=function(){return r.call(this,"initialized")},s=function(){return r.call(this,"hide")},o=function(){return r.call(this,"back")},u=function(){return r.call(this,"change")},a=function(){return r.call(this,"set-breadcrumb")},f=function(){return r.call(this,"set-title")},l=function(){return r.call(this,"set-title-color")},c=function(){return r.call(this,"toolbar.state.change")},h=function(){return r.call(this,"get-height")},p=function(){return r.call(this,"set-toolbar")},d=function(){return r.call(this,"set-bottom-content")},v=function(){return r.call(this,"language-changed")},m=function(){return r.call(this,"tabs.activate")},g=function(){return r.call(this,"tabs.deactivate")},y=function(){return r.call(this,"toolbar.button.set")},b=function(){return r.call(this,"toolbar.item.loading")},w=function(){return r.call(this,"toolbar.item.change")},E=function(){return r.call(this,"toolbar.item.mark")},S=function(){return r.call(this,"toolbar.item.show")},x=function(){return r.call(this,"toolbar.item.enable")},T=function(){return r.call(this,"toolbar.items.set")},N={"default":function(){return[{id:"save-button",icon:"floppy-o",iconSize:"large","class":"highlight",position:1,group:"left",disabled:!0,callback:function(){this.sandbox.emit("sulu.header.toolbar.save")}.bind(this)},{icon:"gear",iconSize:"large",group:"left",id:"options-button",position:30,items:[{id:"delete-button",title:this.sandbox.translate("toolbar.delete"),callback:function(){this.sandbox.emit("sulu.header.toolbar.delete")}.bind(this)}]}]},empty:function(){return[]},save:function(){return[N.default.call(this)[0]]},languageChanger:function(e,n,r,i){var s;return typeof n!="function"&&(n=function(e){this.sandbox.emit("sulu.header.toolbar.language-changed",e)}.bind(this)),s=this.sandbox.util.extend(!0,{},t.languageChangerDefaults,{hidden:!0,itemsOption:{url:e,resultKey:r,titleAttribute:i||"name",idAttribute:"localization",translate:!1,markable:!0,callback:n}}),[s]},languageChangerData:function(e,n){typeof n!="function"&&(n=function(e){this.sandbox.emit("sulu.header.toolbar.language-changed",e)}.bind(this));var r=this.sandbox.util.extend(!0,{},t.languageChangerDefaults,{id:"language",title:this.options.toolbarLanguageChanger.preSelected||this.sandbox.sulu.user.locale,items:e,itemsOption:{markable:!0,callback:n}});return[r]},defaultLanguageChanger:function(){var e,n=[],r,i;for(r=-1,i=this.sandbox.sulu.locales.length;++r<i;)n.push({title:this.sandbox.sulu.locales[r],locale:this.sandbox.sulu.locales[r]});return e=this.sandbox.util.extend(!0,{},t.languageChangerDefaults,{id:"language",title:this.options.toolbarLanguageChanger.preSelected||this.sandbox.sulu.user.locale,items:n,itemsOption:{markable:!0,callback:function(e){this.sandbox.emit(v.call(this),e.locale)}.bind(this)}}),[e]}},C={"default":function(e,t,n){e?this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".item.disable","save-button",!!n):this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".item.enable","save-button",!1)}},k=function(e){var t=e;if(typeof e=="string")try{t=JSON.parse(e)}catch(n){N[e]?t=N[e].call(this):this.sandbox.logger.log("no template found!")}else typeof t=="function"&&(t=e());return t},L=function(e){if(!!C[e])return C[e];this.sandbox.logger.log("no template found!")};return{initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.toolbarInstanceName="header"+this.options.instanceName,this.html(this.sandbox.util.template(n.skeleton)()),this.bindCustomEvents(),this.bindDomEvents()},render:function(){this.sandbox.dom.addClass(this.$el,t.componentClass),this.clean(),this.options.heading!==null&&this.setTitle(this.options.heading),this.options.breadcrumb!==null&&this.setBreadcrumb(this.options.breadcrumb),this.options.titleColor!==null&&this.setTitleColor(this.options.titleColor),this.options.noBack===!0?this.sandbox.dom.hide(this.$find("."+t.backClass)):this.sandbox.dom.show(this.$find("."+t.backClass))},clean:function(){this.cleanBottomContent()},cleanBottomContent:function(){this.sandbox.dom.html("."+t.bottomContentClass,"")},buildToolbarTemplate:function(e,t){var n=[];this.options.toolbarTemplate=k.call(this,e);if(!this.options.changeStateCallback||typeof this.options.changeStateCallback!="function")this.options.changeStateCallback=L.call(this,e);if(this.options.toolbarParentTemplate!==null){this.options.toolbarParentTemplate=k.call(this,t);if(!this.options.parentChangeStateCallback||typeof this.options.parentChangeStateCallback!="function")this.options.parentChangeStateCallback=L.call(this,t);this.options.toolbarTemplate=this.options.toolbarTemplate.concat(this.options.toolbarParentTemplate)}!this.options.toolbarLanguageChanger||!this.options.toolbarLanguageChanger.url?!this.options.toolbarLanguageChanger||!this.options.toolbarLanguageChanger.data?!this.options.toolbarLanguageChanger||(n=N.defaultLanguageChanger.call(this)):n=N.languageChangerData.call(this,this.options.toolbarLanguageChanger.data,this.options.toolbarLanguageChanger.callback):n=N.languageChanger.call(this,this.options.toolbarLanguageChanger.url,this.options.toolbarLanguageChanger.callback,this.options.toolbarLanguageChanger.resultKey||null,this.options.toolbarLanguageChanger.titleAttribute||null),this.options.toolbarTemplate=this.options.toolbarTemplate.concat(n)},startTabs:function(){var e=this.sandbox.data.deferred();return this.options.tabsOptions?this.options.tabsData===null&&!this.options.tabsOptions.data?(this.removeTabsComponent(),e.resolve()):(this.removeTabsComponent(),this.$tabs=this.sandbox.dom.createElement('<div class="'+t.tabsClass+'"></div>'),this.sandbox.dom.append(this.$el,this.$tabs),this.options.tabsFullControl!==!0?(this.startContentTabsComponent(),this.sandbox.once("sulu.content-tabs.content.initialized",function(){this.startTabsComponent(e)}.bind(this))):this.startTabsComponent(e)):e.resolve(),e},startTabsComponent:function(e){if(!!this.options.tabsData||!!this.options.tabsOptions.data){this.sandbox.stop(this.$find("."+t.tabsClass));var n=this.sandbox.dom.createElement("<div/>"),r={el:n,data:this.options.tabsData,instanceName:"header"+this.options.instanceName,forceReload:!1,forceSelect:!0};this.sandbox.dom.addClass(this.$el,t.hasTabsClass),this.sandbox.dom.addClass(t.headerBackgroundSelector,t.hasTabsClass),this.sandbox.once("husky.tabs.header.initialized",function(){e.resolve()}.bind(this)),this.sandbox.dom.html(this.$find("."+t.tabsClass),n),r=this.sandbox.util.extend(!0,{},r,this.options.tabsOptions),this.sandbox.start([{name:"tabs@husky",options:r}])}},removeTabsComponent:function(){var e=this.$find("."+t.tabsClass);this.sandbox.stop(e),this.sandbox.dom.remove(e),this.sandbox.dom.removeClass(t.headerBackgroundSelector,t.hasTabsClass),this.sandbox.dom.removeClass(this.$el,t.hasTabsClass)},setToolbar:function(e){e.template?(this.options.toolbarTemplate=e.template,this.options.toolbarParentTemplate=e.parentTemplate?e.parentTemplate:null,this.options.toolbarOptions=e.toolbarOptions?e.toolbarOptions:{},this.options.toolbarLanguageChanger=e.languageChanger?e.languageChanger:null):(this.options.toolbarTemplate=null,this.options.toolbarParentTemplate=null,this.options.toolbarOptions=e),this.options.toolbarDisabled=!1,this.startToolbar()},startToolbar:function(){var e=this.sandbox.data.deferred();if(this.options.toolbarDisabled!==!0){var n=this.options.toolbarOptions;this.options.toolbarTemplate!==null&&(this.buildToolbarTemplate(this.options.toolbarTemplate,this.options.toolbarParentTemplate),n=this.sandbox.util.extend(!0,{},t.toolbarDefaults,n,{data:this.options.toolbarTemplate})),this.startToolbarComponent(n,e)}else e.resolve();return e},startToolbarComponent:function(e,n){var r=this.sandbox.dom.createElement("<div />"),i={el:r,skin:"blueish",instanceName:this.toolbarInstanceName};!n||this.sandbox.once("husky.toolbar."+this.toolbarInstanceName+".initialized",function(){n.resolve()}.bind(this)),this.sandbox.stop(this.$find("."+t.toolbarClass)),this.sandbox.dom.html(this.$find("."+t.toolbarClass),r),i=this.sandbox.util.extend(!0,{},i,e),this.sandbox.start([{name:"toolbar@husky",options:i}])},bindCustomEvents:function(){this.sandbox.on("husky.toolbar."+this.toolbarInstanceName+".items.set",function(e){e==="language"&&this.enableLanguageChanger()}.bind(this)),this.sandbox.on(c.call(this),this.changeToolbarState.bind(this)),this.sandbox.on(a.call(this),this.setBreadcrumb.bind(this)),this.sandbox.on(f.call(this),this.setTitle.bind(this)),this.sandbox.on(l.call(this),this.setTitleColor.bind(this)),this.sandbox.on(h.call(this),function(e){e(this.sandbox.dom.outerHeight(this.$el))}.bind(this)),this.sandbox.on(p.call(this),this.setToolbar.bind(this)),this.sandbox.on(d.call(this),this.insertBottomContent.bind(this)),this.sandbox.on(u.call(this),this.change.bind(this)),this.sandbox.on(s.call(this),this.hide.bind(this)),this.bindAbstractToolbarEvents(),this.bindAbstractTabsEvents()},bindAbstractToolbarEvents:function(){this.sandbox.on(T.call(this),function(e,t){this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".items.set",e,t)}.bind(this)),this.sandbox.on(y.call(this),function(e,t){this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".button.set",e,t)}.bind(this)),this.sandbox.on(b.call(this),function(e){this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".item.loading",e)}.bind(this)),this.sandbox.on(w.call(this),function(e,t){this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".item.change",e,t)}.bind(this)),this.sandbox.on(S.call(this),function(e,t){this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".item.show",e,t)}.bind(this)),this.sandbox.on(x.call(this),function(e,t){this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".item.enable",e,t)}.bind(this)),this.sandbox.on(E.call(this),function(e){this.sandbox.emit("husky.toolbar."+this.toolbarInstanceName+".item.mark",e)}.bind(this))},enableLanguageChanger:function(){!this.options.toolbarLanguageChanger.preSelected||this.sandbox.emit(w.call(this),"language",this.options.toolbarLanguageChanger.preSelected),this.sandbox.emit(S.call(this),"language")},bindAbstractTabsEvents:function(){this.sandbox.on(m.call(this),function(){this.sandbox.emit("husky.tabs.header.deactivate")}.bind(this)),this.sandbox.on(g.call(this),function(){this.sandbox.emit("husky.tabs.header.activate")}.bind(this))},setBreadcrumb:function(e){if(!!e&&!!e.length){var r=this.sandbox.dom.createElement('<ul class="breadcrumb"/>'),i;this.sandbox.util.foreach(e,function(e){!e.title||(i=this.sandbox.dom.createElement(this.sandbox.util.template(n.breadcrumbItem)({title:this.sandbox.translate(e.title),link:e.link?e.link:"#",event:e.event?e.event:"",inactive:!e.link&&!e.event?!0:!1})),i.find("a").data("eventArgs",e.eventArgs?e.eventArgs:{}),this.sandbox.dom.append(r,i))}.bind(this)),this.sandbox.dom.html(this.$find("."+t.infoClass),r)}},bindDomEvents:function(){this.sandbox.dom.on(this.$find("."+t.backClass),"click",function(){this.sandbox.emit(o.call(this))}.bind(this))},changeToolbarState:function(e,t,n){typeof this.options.changeStateCallback=="function"&&this.options.changeStateCallback.call(this,t,e,n),typeof this.options.parentChangeStateCallback=="function"&&this.options.parentChangeStateCallback.call(this,t,e,n)},startContentTabsComponent:function(){this.options.contentEl!==null&&this.sandbox.start([{name:"content-tabs@suluadmin",options:{el:this.sandbox.dom.$(this.options.contentEl),contentOptions:this.options.contentComponentOptions,tabsData:this.options.tabsData}}])},change:function(t){var n,r;this.options=this.sandbox.util.extend(!0,{},e,t),this.options.changeStateCallback||(this.options.changeStateCallback=L("default")),this.$inner=null,this.$tabs=null,this.render(),n=this.startToolbar(),r=this.startTabs(),this.sandbox.data.when(n,r).then(function(){this.sandbox.emit(i.call(this)),this.show()}.bind(this))},setTitle:function(e){this.sandbox.dom.html(this.$find("h1"),this.sandbox.translate(e))},setTitleColor:function(e){this.sandbox.dom.addClass(this.$find("."+t.titleColorClass),t.titleColorSetClass),this.sandbox.dom.css(this.$find("."+t.titleColorClass),{"background-color":e})},insertBottomContent:function(e){var n=this.$find("."+t.bottomContentClass);this.sandbox.stop(n),this.sandbox.dom.html(n,e)},hide:function(){this.sandbox.dom.hide(this.$el),this.sandbox.dom.hide(t.headerBackgroundSelector)},show:function(){this.sandbox.dom.show(this.$el),this.sandbox.dom.show(t.headerBackgroundSelector)}}}),define("__component__$list-toolbar@suluadmin",[],function(){"use strict";var e={heading:"",template:"default",parentTemplate:null,listener:"default",parentListener:null,instanceName:"content",columnOptions:{disabled:!1,data:[],key:null}},t={"default":function(){return[{id:"add",icon:"plus-circle","class":"highlight-white",title:"add",position:10,callback:function(){this.sandbox.emit("sulu.list-toolbar.add")}.bind(this)},{id:"delete",icon:"trash-o",title:"delete",position:20,disabled:!0,callback:function(){this.sandbox.emit("sulu.list-toolbar.delete")}.bind(this)},{id:"settings",icon:"gear",position:30,items:[{title:this.sandbox.translate("sulu.list-toolbar.import"),disabled:!0},{title:this.sandbox.translate("sulu.list-toolbar.export"),disabled:!0},{type:"columnOptions"}]}]},defaultEditable:function(){return t.default.call(this).concat([{id:"edit",icon:"pencil",title:"edit",position:25,disabled:!0,callback:function(){this.sandbox.emit("sulu.list-toolbar.edit")}.bind(this)}])},defaultNoSettings:function(){var e=t.default.call(this);return e.splice(2,1),e},onlyAdd:function(){var e=t.default.call(this);return e.splice(1,2),e},changeable:function(){return[{id:"change",icon:"th-large",itemsOption:{markable:!0},items:[{id:"small-thumbnails",title:this.sandbox.translate("sulu.list-toolbar.small-thumbnails"),callback:function(){this.sandbox.emit("sulu.list-toolbar.change.thumbnail-small")}.bind(this)},{id:"big-thumbnails",title:this.sandbox.translate("sulu.list-toolbar.big-thumbnails"),callback:function(){this.sandbox.emit("sulu.list-toolbar.change.thumbnail-large")}.bind(this)},{id:"table",title:this.sandbox.translate("sulu.list-toolbar.table"),callback:function(){this.sandbox.emit("sulu.list-toolbar.change.table")}.bind(this)}]}]},defaultEditableList:function(){var e=t.default.call(this);return e.splice(1,0,{icon:"floppy-o",iconSize:"large",disabled:!0,id:"save",title:this.sandbox.translate("sulu.list-toolbar.save"),callback:function(){this.sandbox.emit("sulu.list-toolbar.save")}.bind(this)}),e}},n={"default":function(){var e=this.options.instanceName?this.options.instanceName+".":"",t;this.sandbox.on("husky.datagrid.number.selections",function(n){t=n>0?"enable":"disable",this.sandbox.emit("husky.toolbar."+e+"item."+t,"delete",!1)}.bind(this)),this.sandbox.on("sulu.list-toolbar."+e+"delete.state-change",function(n){t=n?"enable":"disable",this.sandbox.emit("husky.toolbar."+e+"item."+t,"delete",!1)}.bind(this)),this.sandbox.on("sulu.list-toolbar."+e+"edit.state-change",function(n){t=n?"enable":"disable",this.sandbox.emit("husky.toolbar."+e+"item."+t,"edit",!1)}.bind(this))},defaultEditableList:function(){var e=this.options.instanceName?this.options.instanceName+".":"";n.default.call(this),this.sandbox.on("husky.datagrid.data.changed",function(){this.sandbox.emit("husky.toolbar."+e+"item.enable","save")}.bind(this))}},r=function(){return{title:this.sandbox.translate("list-toolbar.column-options"),disabled:!1,callback:function(){var e;this.sandbox.dom.append("body",'<div id="column-options-overlay" />'),this.sandbox.start([{name:"column-options@husky",options:{el:"#column-options-overlay",data:this.sandbox.sulu.getUserSetting(this.options.columnOptions.key),hidden:!1,instanceName:this.options.instanceName,trigger:".toggle",header:{title:this.sandbox.translate("list-toolbar.column-options.title")}}}]),e=this.options.instanceName?this.options.instanceName+".":"",this.sandbox.once("husky.column-options."+e+"saved",function(e){this.sandbox.sulu.saveUserSetting(this.options.columnOptions.key,e)}.bind(this))}.bind(this)}},i=function(e,t){var n=e.slice(0),r=[];return this.sandbox.util.foreach(e,function(e){r.push(e.id)}.bind(this)),this.sandbox.util.foreach(t,function(e){var t=r.indexOf(e.id);t<0?n.push(e):n[t]=e}.bind(this)),n},s=function(e,t){if(typeof e=="string")try{e=JSON.parse(e)}catch(n){t[e]?e=t[e].call(this):this.sandbox.logger.log("no template found!")}else typeof e=="function"&&(e=e.call(this));return e},o=function(e){var t,n,i;for(t=-1,n=e.length;++t<n;)i=e[t],i.hasOwnProperty("items")&&(i.items=o.call(this,i.items)),i.hasOwnProperty("type")&&i.type==="columnOptions"&&(e[t]=this.sandbox.util.extend({},r.call(this),i));return e},u=function(e){this.sandbox.emit("sulu.header.set-toolbar",e)},a=function(e){this.sandbox.start([{name:"toolbar@husky",options:e}])};return{initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.options.template=s.call(this,this.options.template,t),this.options.listener=s.call(this,this.options.listener,n),!this.options.parentTemplate||(this.options.parentTemplate=s.call(this,this.options.parentTemplate,t),this.options.parentListener=s.call(this,this.options.parentListener,n),this.options.template=i.call(this,this.options.parentTemplate,this.options.template)),this.options.template=o.call(this,this.options.template);var r,f={groups:this.options.groups,hasSearch:!0,data:this.options.template,instanceName:this.options.instanceName,showTitleAsTooltip:!0,searchOptions:{placeholderText:"public.search"}};this.options.hasOwnProperty("hasSearch")&&(f.hasSearch=this.options.hasSearch),this.options.listener&&this.options.listener.call(this),this.options.parentListener&&this.options.parentListener.call(this),this.options.inHeader!==!0?(r=this.sandbox.dom.createElement("<div />"),this.html(r),f.el=r,a.call(this,f)):(this.sandbox.dom.hide(this.$el),u.call(this,f))}}}),define("__component__$labels@suluadmin",[],function(){"use strict";var e="sulu.labels.",t=function(){return u.call(this,"error.show")},n=function(){return u.call(this,"warning.show")},r=function(){return u.call(this,"success.show")},i=function(){return u.call(this,"label.show")},s=function(){return u.call(this,"remove")},o=function(){return u.call(this,"label.remove")},u=function(t){return e+t};return{initialize:function(){this.labelId=0,this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on(t.call(this),function(e,t,n){this.showLabel("ERROR",e,t,n)}.bind(this)),this.sandbox.on(n.call(this),function(e,t,n){this.showLabel("WARNING",e,t,n)}.bind(this)),this.sandbox.on(r.call(this),function(e,t,n){this.showLabel("SUCCESS",e,t,n)}.bind(this)),this.sandbox.on(i.call(this),function(e,t){e.el=this.createLabelContainer(t),this.startLabelComponent(e)}.bind(this)),this.sandbox.on(s.call(this),function(){this.removeLabels()}.bind(this)),this.sandbox.on("sulu.router.navigate",function(){this.removeLabels()}.bind(this)),this.sandbox.on(o.call(this),function(e){this.removeLabelWithId(e)}.bind(this))},removeLabels:function(){this.sandbox.dom.html(this.$el,"")},createLabelContainer:function(e){var t=this.sandbox.dom.createElement("<div/>"),n;return typeof e!="undefined"?(n=e,this.removeLabelWithId(e)):(this.labelId=this.labelId+1,n=this.labelId),this.sandbox.dom.attr(t,"id","sulu-labels-"+n),this.sandbox.dom.attr(t,"data-id",n),this.sandbox.dom.append(this.$el,t),t},removeLabelWithId:function(e){this.sandbox.dom.remove(this.sandbox.dom.find("[data-id='"+e+"']",this.$el))},showLabel:function(e,t,n,r){this.startLabelComponent({type:e,description:this.sandbox.translate(t),title:this.sandbox.translate(n),el:this.createLabelContainer(r)})},startLabelComponent:function(e){this.sandbox.start([{name:"label@husky",options:e}])}}}),define("__component__$grid-group@suluadmin",[],function(){"use strict";var e={data:{},slideDuration:250,instanceName:"undefined",gridUrl:"",urlParameter:{},preselected:[],resultKey:"",dataGridOptions:{view:"thumbnail",pagination:"showall",matchings:[],viewOptions:null}},t={elementsKey:"public.elements",slideDownIcon:"caret-right",slideUpIcon:"caret-down",componentClass:"sulu-grid-group",groupClass:"entity",slideClass:"group-slide",titleClass:"entity-title",colorPointClass:"color",newGroupId:"new",gridContainerClass:"grid-container"},n="sulu.grid-group.",r={group:['<div class="',t.groupClass,'">','   <div class="head">','       <div class="fa-<%= icon %> icon"></div>','       <div class="',t.titleClass,'"><%= title %></div>',"   </div>",'   <div class="',t.slideClass,'"></div>',"</div>"].join("")},i=function(){return w.call(this,"initialized")},s=function(){return w.call(this,"show-all-groups")},o=function(){return w.call(this,"get-selected")},u=function(){return w.call(this,"get-selected-ids")},a=function(){return w.call(this,"close-all-groups")},f=function(){return w.call(this,"elements-selected")},l=function(){return w.call(this,"remove-record")},c=function(){return w.call(this,"show-group")},h=function(){return w.call(this,"record-clicked")},p=function(){return w.call(this,"record-selected")},d=function(){return w.call(this,"record-deselected")},v=function(){return w.call(this,"height-changed")},m=function(){return w.call(this,"update-group")},g=function(){return w.call(this,"add-group")},y=function(){return w.call(this,"reload")},b=function(){return w.call(this,"update-last-clicked")},w=function(e){return n+(this.options.instanceName?this.options.instanceName+".":"")+e};return{initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.dataGridEventsBound=[],this.setVariables(),this.bindCustomEvents(),this.render(),this.sandbox.emit(i.call(this))},setVariables:function(){this.group={},this.selectedRecords={},this.lastClickedGrid=null,this.openedGroups=this.openedGroups?this.openedGroups:[],this.selected=this.options.preselected},bindCustomEvents:function(){this.sandbox.on(m.call(this),this.updateGroup.bind(this)),this.sandbox.on(a.call(this),this.slideUpAll.bind(this)),this.sandbox.on(s.call(this),this.slideDownAll.bind(this)),this.sandbox.on(o.call(this),this.getSelected.bind(this)),this.sandbox.on(u.call(this),this.getSelectedIds.bind(this)),this.sandbox.on(l.call(this),this.removeRecord.bind(this)),this.sandbox.on(g.call(this),this.addGroup.bind(this)),this.sandbox.on(y.call(this),this.reload.bind(this)),this.sandbox.on(b.call(this),function(){this.sandbox.emit("husky.datagrid."+this.lastClickedGrid+".update")}.bind(this))},reload:function(e){this.sandbox.stop("*"),this.sandbox.dom.html(this.$el,""),this.options.data=e.data?e.data:this.options.data,!e.preselected||(this.options.preselected=e.preselected?e.preselected:this.options.preselected),this.setVariables(),this.render()},getSelected:function(e){this.setSelectedRecords().then(function(){typeof e=="function"&&e(this.selectedRecords)}.bind(this))},getSelectedIds:function(e){typeof e=="function"&&e(this.selected)},removeRecord:function(e,t){this.sandbox.emit("husky.datagrid."+this.group[e].datagridName+".record.remove",t),this.group[e].selectedElements=0,delete this.selectedRecords[e]},setSelectedRecords:function(){var e=0,t=Object.keys(this.group).length,n=this.sandbox.data.deferred();this.selectedRecords={};for(var r in this.group)this.group.hasOwnProperty(r)&&this.group[r].selectedElements>0?this.sandbox.emit("husky.datagrid."+this.group[r].datagridName+".items.get-selected",function(i){this.selectedRecords[r]=i,e++,e===t&&n.resolve()}.bind(this)):(t--,e===t&&n.resolve());return n.promise()},addGroup:function(e){var t={style:{color:e.color}};t=this.sandbox.util.extend(!0,{},t,e),this.renderGroup(this.sandbox.util.extend(!1,{},t),this.$el,!0)},render:function(){this.sandbox.dom.addClass(this.$el,t.componentClass),this.sandbox.util.foreach(this.options.data,function(e){this.renderGroup(e,this.$el,!1)}.bind(this))},renderGroup:function(e,n,i){var s=this.sandbox.dom.createElement(this.sandbox.util.template(r.group,{icon:t.slideDownIcon,title:e.title}));i===!0&&(e.id=t.newGroupId),this.sandbox.dom.hide(this.sandbox.dom.find("."+t.slideClass,s)),this.sandbox.dom.append(n,s),this.group[e.id]={id:e.id,$el:s,data:e,selectedElements:0,datagridName:null,datagridLoaded:!1},this.bindGroupDomEvents(e.id),this.openedGroups.indexOf(e.id)>-1&&this.slideDown(this.group[e.id])},updateGroup:function(e){if(!this.group[e.id]){if(!this.group[t.newGroupId])return this.sandbox.logger.log("Error. Undefined group cannot be updated"),!1;this.group[e.id]={id:e.id,$el:this.group[t.newGroupId].$el,data:e,selectedElements:0,datagridName:null,datagridLoaded:!1},this.sandbox.dom.off(this.group[t.newGroupId].$el),delete this.group[t.newGroupId],this.bindGroupDomEvents(e.id)}else this.group[e.id].data=e;this.sandbox.dom.html(this.sandbox.dom.find("."+t.titleClass,this.group[e.id].$el),this.group[e.id].data.title),this.sandbox.dom.css(this.sandbox.dom.find("."+t.colorPointClass,this.group[e.id].$el),{"background-color":this.group[e.id].data.style.color})},startGroupDatagrid:function(e,n,r){this.group[e].datagridName=this.options.instanceName+e,this.group[e].datagridLoaded=!0;var i=this.sandbox.dom.createElement('<div class="'+t.gridContainerClass+'"/>'),s=this.options.instanceName+e;this.sandbox.dom.html(n,i),this.bindDatagridEvents(s,e),this.sandbox.start([{name:"datagrid@husky",options:{el:i,url:r,view:this.options.dataGridOptions.view,pagination:this.options.dataGridOptions.pagination,matchings:this.options.dataGridOptions.matchings,viewOptions:this.options.dataGridOptions.viewOptions,preselected:this.selected,resultKey:this.options.resultKey,instanceName:s,searchInstanceName:this.options.instanceName,resizeListeners:!1,paginationOptions:{showall:{showAllHandler:this.showAllRecords.bind(this,e)}}}}])},bindDatagridEvents:function(e,t){this.dataGridEventsBound.indexOf(e)===-1&&(this.dataGridEventsBound.push(e),this.sandbox.on("husky.datagrid."+e+".number.selections",function(e){this.group[t].selectedElements=e,this.emitElementsSelected()}.bind(this)),this.sandbox.on("husky.datagrid."+e+".item.click",function(e){this.lastClickedGrid=this.group[t].datagridName,this.sandbox.emit(h.call(this),e)}.bind(this)),this.sandbox.on("husky.datagrid."+e+".view.rendered",function(){this.sandbox.emit(v.call(this))}.bind(this)),this.sandbox.on("husky.datagrid."+e+".item.deselect",function(e){var t=this.selected.indexOf(e);this.selected.splice(t,1),this.sandbox.emit(d.call(this),e)}.bind(this)),this.sandbox.on("husky.datagrid."+e+".item.select",function(e){this.selected.push(e),this.sandbox.emit(p.call(this),e)}.bind(this)))},emitElementsSelected:function(){for(var e in this.group)if(this.group[e].selectedElements>0)return this.sandbox.emit(f.call(this),!0),!0;return this.sandbox.emit(f.call(this),!1),!1},bindGroupDomEvents:function(e){e!==t.newGroupId&&this.sandbox.dom.on(this.group[e].$el,"click",function(){this.toggleGroup(this.group[e])}.bind(this),".head")},slideUpAll:function(){for(var e in this.group)this.group.hasOwnProperty(e)&&this.slideUp(this.group[e])},slideDownAll:function(){for(var e in this.group)this.group.hasOwnProperty(e)&&this.slideDown(this.group[e])},toggleGroup:function(e){this.sandbox.dom.is(this.sandbox.dom.find("."+t.slideClass,e.$el),":visible")?this.slideUp(e):this.slideDown(e)},slideUp:function(e){this.openedGroups.splice(this.openedGroups.indexOf(e.id),1),this.sandbox.dom.slideUp(this.sandbox.dom.find("."+t.slideClass,e.$el),this.options.slideDuration,function(){this.sandbox.emit(v.call(this))}.bind(this)),this.sandbox.dom.removeClass(this.sandbox.dom.find(".head .icon",e.$el),"fa-"+t.slideUpIcon),this.sandbox.dom.prependClass(this.sandbox.dom.find(".head .icon",e.$el),"fa-"+t.slideDownIcon)},slideDown:function(e){this.openedGroups.push(e.id),this.sandbox.dom.slideDown(this.sandbox.dom.find("."+t.slideClass,e.$el),this.options.slideDuration,function(){this.sandbox.emit(v.call(this))}.bind(this)),this.sandbox.dom.removeClass(this.sandbox.dom.find(".head .icon",e.$el),"fa-"+t.slideDownIcon),this.sandbox.dom.prependClass(this.sandbox.dom.find(".head .icon",e.$el),"fa-"+t.slideUpIcon),e.datagridLoaded===!1&&this.startGroupDatagrid(e.id,this.sandbox.dom.find("."+t.slideClass,e.$el),this.getUrl(e))},getUrl:function(e){var t=this.options.gridUrl,n;if(e.data._links.hasOwnProperty(t)){t=e.data._links[t].href;for(n in this.options.urlParameter)this.options.urlParameter.hasOwnProperty(n)&&(t=t.replace("%7B"+n+"%7D",this.options.urlParameter[n]))}return t},showAllRecords:function(e){this.sandbox.emit(c.call(this),e)}}}),define("__component__$sidebar@suluadmin",[],function(){"use strict";var e={instanceName:"",url:"",expandable:!0},t={widgetContainerSelector:"#sulu-widgets",componentClass:"sulu-sidebar",columnSelector:".sidebar-column",fixedWidthClass:"fixed",maxWidthClass:"max",loaderClass:"sidebar-loader",visibleSidebarClass:"has-visible-sidebar",noVisibleSidebarClass:"has-no-visible-sidebar",hiddenClass:"hidden"},n=function(){return h.call(this,"initialized")},r=function(){return h.call(this,"hide")},i=function(){return h.call(this,"show")},s=function(){return h.call(this,"append-widget")},o=function(){return h.call(this,"prepend-widget")},u=function(){return h.call(this,"set-widget")},a=function(){return h.call(this,"empty")},f=function(){return h.call(this,"change-width")},l=function(){return h.call(this,"add-classes")},c=function(){return h.call(this,"reset-classes")},h=function(e){return"sulu.sidebar."+(this.options.instanceName?this.options.instanceName+".":"")+e};return{initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.widgets=[],this.bindCustomEvents(),this.render(),this.sandbox.emit(n.call(this))},render:function(){this.sandbox.dom.addClass(this.$el,t.componentClass),this.hideColumn()},bindCustomEvents:function(){this.sandbox.on(f.call(this),this.changeWidth.bind(this)),this.sandbox.on(r.call(this),this.hideColumn.bind(this)),this.sandbox.on(i.call(this),this.showColumn.bind(this)),this.sandbox.on(u.call(this),this.setWidget.bind(this)),this.sandbox.on(s.call(this),this.appendWidget.bind(this)),this.sandbox.on(o.call(this),this.prependWidget.bind(this)),this.sandbox.on(a.call(this),this.emptySidebar.bind(this)),this.sandbox.on(c.call(this),this.resetClasses.bind(this)),this.sandbox.on(l.call(this),this.addClasses.bind(this))},resetClasses:function(){this.sandbox.dom.removeClass(this.$el),this.sandbox.dom.addClass(this.$el,t.componentClass)},addClasses:function(e){this.sandbox.dom.addClass(this.$el,e)},changeWidth:function(e){e==="fixed"?this.changeToFixedWidth():e==="max"&&this.changeToMaxWidth(),this.sandbox.dom.trigger(this.sandbox.dom.window,"resize")},changeToFixedWidth:function(){var e=this.sandbox.dom.find(t.columnSelector),n;this.sandbox.dom.hasClass(e,t.fixedWidthClass)||(n=this.sandbox.dom.parent(e),this.sandbox.dom.removeClass(e,t.maxWidthClass),this.sandbox.dom.addClass(e,t.fixedWidthClass),this.sandbox.dom.detach(e),this.sandbox.dom.append(n,e))},changeToMaxWidth:function(){var e=this.sandbox.dom.find(t.columnSelector),n;this.sandbox.dom.hasClass(e,t.maxWidthClass)||(n=this.sandbox.dom.parent(e),this.sandbox.dom.removeClass(e,t.fixedWidthClass),this.sandbox.dom.addClass(e,t.maxWidthClass),this.sandbox.dom.detach(e),this.sandbox.dom.append(n,e))},hideColumn:function(){var e=this.sandbox.dom.find(t.columnSelector),n=this.sandbox.dom.parent(e);this.changeToFixedWidth(),this.sandbox.dom.removeClass(n,t.visibleSidebarClass),this.sandbox.dom.addClass(n,t.noVisibleSidebarClass),this.sandbox.dom.addClass(e,t.hiddenClass),this.sandbox.dom.trigger(this.sandbox.dom.window,"resize")},showColumn:function(){var e=this.sandbox.dom.find(t.columnSelector),n=this.sandbox.dom.parent(e);this.sandbox.dom.removeClass(n,t.noVisibleSidebarClass),this.sandbox.dom.addClass(n,t.visibleSidebarClass),this.sandbox.dom.removeClass(e,t.hiddenClass),this.sandbox.dom.trigger(this.sandbox.dom.window,"resize")},appendWidget:function(e,t){if(!t){var n;this.loadWidget(e).then(function(t){n=this.sandbox.dom.createElement(this.sandbox.util.template(t,{translate:this.sandbox.translate})),this.widgets.push({url:e,$el:n}),this.sandbox.dom.append(this.$el,n),this.sandbox.start(n)}.bind(this))}else this.showColumn(),this.widgets.push({url:null,$el:t}),this.sandbox.dom.append(this.$el,t)},prependWidget:function(e,t){if(!t){var n;this.loadWidget(e).then(function(t){n=this.sandbox.dom.createElement(this.sandbox.util.template(t,{translate:this.sandbox.translate})),this.widgets.unshift({url:e,$el:n}),this.sandbox.dom.prepend(this.$el,n),this.sandbox.start(n)}.bind(this))}else this.showColumn(),this.widgets.push({url:null,$el:t}),this.sandbox.dom.prepend(this.$el,t)},setWidget:function(e,t){if(!t){if(this.widgets.length!==1||this.widgets[0].url!==e){var n;this.emptySidebar(!1),this.loadWidget(e).then(function(t){if(t===undefined||t===""){this.sandbox.dom.css(this.$el,"display","none");return}n=this.sandbox.dom.createElement(this.sandbox.util.template(t,{translate:this.sandbox.translate})),this.widgets.push({url:e,$el:n}),this.sandbox.dom.append(this.$el,n),this.sandbox.start(this.$el,n),this.sandbox.dom.css(this.$el,"display","block")}.bind(this))}}else this.emptySidebar(!0),this.showColumn(),this.widgets.push({url:null,$el:t}),this.sandbox.dom.append(this.$el,t),this.sandbox.dom.css(this.$el,"display","block")},loadWidget:function(e){var t=this.sandbox.data.deferred();return this.showColumn(),this.startLoader(),this.sandbox.util.load(e,null,"html").then(function(e){this.stopLoader(),t.resolve(e)}.bind(this)),t.promise()},emptySidebar:function(e){while(this.widgets.length>0)this.sandbox.stop(this.widgets[0].$el),this.sandbox.dom.remove(this.widgets[0].$el),this.widgets.splice(0,1);e!==!0&&this.hideColumn()},startLoader:function(){var e=this.sandbox.dom.createElement('<div class="'+t.loaderClass+'"/>');this.sandbox.dom.append(this.$el,e),this.sandbox.start([{name:"loader@husky",options:{el:e,size:"100px",color:"#e4e4e4"}}])},stopLoader:function(){this.sandbox.stop(this.$find("."+t.loaderClass))}}}),define("__component__$data-overlay@suluadmin",[],function(){"use strict";var e={instanceName:"",component:""},t={main:['<div class="data-overlay">','<button class="fa-times data-overlay-close btn btn-link"></button>','<div class="data-overlay-content"></div>',"</div>"].join("")},n=function(e){return"sulu.data-overlay."+(this.options.instanceName?this.options.instanceName+".":"")+e},r=function(){return n.call(this,"initialized")},i=function(){return n.call(this,"show")},s=function(){return n.call(this,"hide")};return{initialize:function(){this.options=this.sandbox.util.extend(!0,{},e,this.options),this.mainTemplate=this.sandbox.util.template(t.main),this.render(),this.startComponent(),this.bindEvents(),this.bindDomEvents(),this.sandbox.emit(r.call(this))},bindEvents:function(){this.sandbox.on(i.call(this),this.show.bind(this)),this.sandbox.on(s.call(this),this.hide.bind(this))},bindDomEvents:function(){this.$el.on("click",".data-overlay-close",this.hide.bind(this))},render:function(){var e=this.mainTemplate();this.$el.html(e)},startComponent:function(){var e=this.options.component;if(!e)throw new Error("No component defined!");this.sandbox.start([{name:e,options:{el:".data-overlay-content"}}])},show:function(){this.$el.fadeIn(150)},hide:function(){this.$el.fadeOut(150)}}});