define([],function(){return function(a,b,c){this.pendingShow=null,this.google=null,this.map=null,this.marker=null;var d="https://maps.google.com/maps/api/js?sensor=false";b.api_key&&(d=d+"&key="+b.api_key),require(["async!"+d],function(){this.google=google,this.map=new google.maps.Map(document.getElementById(a),{}),this.marker=new google.maps.Marker({map:this.map,draggable:c.draggableMarker}),c.positionUpdateCallback&&google.maps.event.addListener(this.marker,"position_changed",function(){c.positionUpdateCallback(this.marker.position.lng(),this.marker.position.lat())}.bind(this)),c.zoomChangeCallback&&google.maps.event.addListener(this.map,"zoom_changed",function(){c.zoomChangeCallback(this.map.getZoom())}.bind(this)),this.pendingShow&&(this.show(this.pendingShow.lng,this.pendingShow.lat,this.pendingShow.zoom),this.pendingShow=null)}.bind(this)),this.show=function(a,b,c){if(null===this.google)return void(this.pendingShow={lng:a,lat:b,zoom:c});var d=new this.google.maps.LatLng(b,a);this.map.setCenter(d),this.map.setZoom(parseInt(c)),this.marker.setPosition(d)}.bind(this)}});