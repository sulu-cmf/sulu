define(["app-config"],function(a){"use strict";var b=function(a,b,c){var d,e=[{title:"navigation.contacts"},{title:"contact.accounts.title",event:"sulu.contacts.accounts.list"}],f=this.sandbox.translate("contact.accounts.title");d=this.sandbox.translate(a?a.translation:"contact.account.type.basic"),c?(e.push({title:d+" #"+c}),f=b):e.push({title:d}),this.sandbox.emit("sulu.header.set-title",f),this.sandbox.emit("sulu.header.set-breadcrumb",e)},c=function(a){var b;if(a||a.hasownProperty("tabs"))for(b in a.tabs)a.tabs[b]===!0&&this.sandbox.emit("husky.tabs.header.item.show",b)},d=function(b,c){var d,e,f,g,h,i=0,j=a.getSection("sulu-contact");if(!j||j.length>0||!j.hasOwnProperty("accountTypes"))return!1;h=j.accountTypes,b&&b.hasOwnProperty("id")&&b.hasOwnProperty("type")?(d=b.type,e="id"):c?(d=c,e="name"):(d=0,e="id");for(f in h)if(g=h[f],g[e]===d){i=g;break}return i},e=function(a,b){var c=[];return this.sandbox.util.each(a.convertableTo,function(a,d){if(d){var e=f.call(this,b,a);c.push(e)}}.bind(this)),c},f=function(a,b){var c;return this.sandbox.util.each(a,function(a,d){return d.name===b?(c={title:this.sandbox.translate(d.translation+".conversion"),callback:function(){this.sandbox.emit("sulu.contacts.account.convert",d)}.bind(this)},!1):void 0}.bind(this)),c},g=function(a,b){var c=[],d={icon:"gear",iconSize:"large",group:"left",id:"options-button",position:30,items:[]};c.push({id:"save-button",icon:"floppy-o",iconSize:"large","class":"highlight",position:1,group:"left",disabled:!0,callback:function(){this.sandbox.emit("sulu.header.toolbar.save")}.bind(this)}),this.account.id&&(d.items=e.call(this,a,b)),d.items.push({title:this.sandbox.translate("toolbar.delete"),callback:function(){this.sandbox.emit("sulu.header.toolbar.delete")}.bind(this)}),c.push(d),this.sandbox.emit("sulu.header.set-toolbar",{data:c})};return{setHeader:function(e,f){var h,i=a.getSection("sulu-contact").accountTypes;e=e.toJSON(),h=d.call(this,e,f),c.call(this,h),b.call(this,h,e.name,e.number),g.call(this,h,i),this.sandbox.emit("sulu.contacts.account.types",{accountType:h,accountTypes:i})},getAccountType:function(a,b){return d.call(this,a,b)},getAccountTypeIdByTypeName:function(a){return d.call(this,null,a).id},getAccountTypeById:function(a){return d.call({id:a,type:a})}}});