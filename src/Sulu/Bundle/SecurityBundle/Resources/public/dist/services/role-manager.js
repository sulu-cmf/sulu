define(["services/husky/util","sulusecurity/models/role"],function(a,b){"use strict";var c=function(a){var c=$.Deferred(),d=b.findOrCreate({id:a.id});return d.set(a),d.save(null,{success:function(a){c.resolve(a.toJSON())}.bind(this),error:function(a,b){c.reject(b)}.bind(this)}),c},d=function(a){var c=b.findOrCreate({id:a}),d=$.Deferred();return c.destroy({success:function(){d.resolve()}.bind(this),error:function(a,b){d.reject(b)}.bind(this)}),d};return{load:function(a){var c=$.Deferred(),d=b.findOrCreate({id:a});return d.fetch({success:function(){c.resolve(d.toJSON())}.bind(this),error:function(){c.reject()}.bind(this)}),c},save:function(a){var b=$.Deferred();return c(a).done(function(a){b.resolve(a)}.bind(this)).fail(function(a){b.reject(a)}.bind(this)),b},"delete":function(b){$.isArray(b)||(b=[b]);var c=[],e=$.Deferred();return a.each(b,function(a,b){c.push(d(b))}.bind(this)),$.when.apply(null,c).done(function(){e.resolve()}.bind(this)).fail(function(){e.reject()}.bind(this)),e}}});