define(["sulumedia/model/collection"],function(a){"use strict";var b={parent:null,instanceName:"",createdCallback:function(){}},c={newFormSelector:"#collection-new"};return{templates:["/admin/media/template/collection/new"],initialize:function(){this.options=this.sandbox.util.extend(!0,{},b,this.options),this.openOverlay()},addCollection:function(){if(!this.sandbox.form.validate(c.newFormSelector))return!1;var b=this.sandbox.form.getData(c.newFormSelector),d=new a;b.parent=this.options.parent,b.locale=this.sandbox.sulu.user.locale,d.set(b),d.save(null,{success:function(a){this.options.createdCallback(a),this.sandbox.stop()}.bind(this),error:function(){this.sandbox.stop()}.bind(this)})},openOverlay:function(){var a=this.sandbox.dom.createElement('<div class="overlay-element"/>');this.sandbox.dom.append(this.$el,a),this.$overlayContent=this.renderTemplate("/admin/media/template/collection/new"),this.sandbox.once("husky.overlay.add-collection.opened",function(){this.sandbox.start(c.newFormSelector),this.sandbox.form.create(c.newFormSelector)}.bind(this)),this.sandbox.start([{name:"overlay@husky",options:{el:a,title:this.sandbox.translate("sulu.media.add-collection"),instanceName:"add-collection",data:this.$overlayContent,okCallback:this.addCollection.bind(this),cancelCallBack:function(){this.sandbox.stop()}.bind(this),openOnStart:!0,removeOnClose:!0}}])}}});