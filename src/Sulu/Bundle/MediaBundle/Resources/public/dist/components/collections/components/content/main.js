define(function(){"use strict";var a={mediaLanguageStorageKey:"mediaLanguage"},b="sulu.media.collections-edit.",c=function(){return e.call(this,"set-locale")},d=function(){return e.call(this,"get-locale")},e=function(a){return b+a};return{header:function(){return this.locale=this.sandbox.sulu.getUserSetting(a.mediaLanguageStorageKey)||this.sandbox.sulu.user.locale,{tabs:{url:"/admin/content-navigations?alias=media"},toolbar:{buttons:["save",{settings:{dropdownItems:[{id:"collection-move",title:this.sandbox.translate("sulu.collection.move"),callback:this.startMoveCollectionOverlay.bind(this)},{id:"delete",title:this.sandbox.translate("sulu.collections.delete-collection"),callback:this.deleteCollection.bind(this)}]}}],languageChanger:{url:"/admin/api/localizations",resultKey:"localizations",titleAttribute:"localization",preSelected:this.locale}},noBack:!0}},deleteCollection:function(){this.sandbox.emit("sulu.media.collections.delete-collection",this.options.id)},startMoveCollectionOverlay:function(){this.sandbox.emit("sulu.media.collection-select.move-collection.open")},moveCollection:function(a){this.sandbox.emit("sulu.media.collections.move",this.options.id,a,function(){var a="/admin/api/collections/"+this.options.id+"?depth=1&sortBy=title";this.sandbox.emit("husky.data-navigation.collections.set-url",a),this.sandbox.emit("sulu.labels.success.show","labels.success.collection-move-desc","labels.success")}.bind(this)),this.sandbox.emit("sulu.media.collection-select.move-collection.restart"),this.sandbox.emit("sulu.media.collection-select.move-collection.close")},initialize:function(){this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on(c.call(this),this.setLocale.bind(this)),this.sandbox.on(d.call(this),this.getLocale.bind(this)),this.sandbox.on("sulu.media.collection-select.move-collection.selected",this.moveCollection.bind(this))},setLocale:function(b){this.sandbox.sulu.saveUserSetting(a.mediaLanguageStorageKey,b),this.locale=b},getLocale:function(a){a(this.locale)}}});