define(function(){"use strict";var a="sulu.media.collections-edit.",b=function(){return d.call(this,"set-locale")},c=function(){return d.call(this,"get-locale")},d=function(b){return a+b};return{header:function(){var a=this.sandbox.data.deferred();return this.sandbox.util.load("/admin/api/localizations").then(function(b){var c=b.map(function(a){return{id:a.localization,title:a.localization}});a.resolve({tabs:{url:"/admin/media/navigation/collection"},toolbar:{template:[{id:"settings",icon:"gear",position:30,items:[{id:"collection-move",title:this.sandbox.translate("sulu.collection.move"),callback:this.startMoveCollectionOverlay.bind(this)},{id:"delete",title:this.sandbox.translate("sulu.collections.delete-collection"),callback:this.deleteCollection.bind(this)}]}],parentTemplate:"save",languageChanger:{data:c,preSelected:this.options.locale}},noBack:!0})}.bind(this)),a},deleteCollection:function(){this.sandbox.emit("sulu.media.collections.delete-collection",this.options.id)},startMoveCollectionOverlay:function(){this.sandbox.emit("sulu.media.collection-select.move-collection.open")},moveCollection:function(a){this.sandbox.emit("sulu.media.collections.move",this.options.id,a,function(){var a="/admin/api/collections/"+this.options.id+"?depth=1";this.sandbox.emit("husky.data-navigation.collections.set-url",a),this.sandbox.emit("sulu.labels.success.show","labels.success.collection-move-desc","labels.success")}.bind(this)),this.sandbox.emit("sulu.media.collection-select.move-collection.restart"),this.sandbox.emit("sulu.media.collection-select.move-collection.close")},initialize:function(){this.locale=this.sandbox.sulu.user.locale,this.bindCustomEvents()},bindCustomEvents:function(){this.sandbox.on(b.call(this),this.setLocale.bind(this)),this.sandbox.on(c.call(this),this.getLocale.bind(this)),this.sandbox.on("sulu.media.collection-select.move-collection.selected",this.moveCollection.bind(this))},setLocale:function(a){this.locale=a},getLocale:function(a){a(this.locale)}}});