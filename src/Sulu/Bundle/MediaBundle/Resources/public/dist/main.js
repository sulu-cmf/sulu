require.config({paths:{sulumedia:"../../sulumedia/dist","type/mediaSelection":"../../sulumedia/dist/validation/types/mediaSelection"}}),define({name:"SuluMediaBundle",initialize:function(a){"use strict";var b=a.sandbox;a.components.addSource("sulumedia","/bundles/sulumedia/dist/components"),b.urlManager.setUrl("media","media/collections/edit:<%= collectionId %>/files/edit:<%= mediaId %>",function(a){return{mediaId:a.properties.media_id,collectionId:a.properties.collection_id}}),b.mvc.routes.push({route:"media/collections/root",callback:function(){return'<div data-aura-component="collections@sulumedia"  data-aura-display="root"/>'}}),b.mvc.routes.push({route:"media/collections/edit::id/:content",callback:function(a){return'<div data-aura-component="collections@sulumedia" data-aura-display="edit" data-aura-id="'+a+'"/>'}}),b.mvc.routes.push({route:"media/collections/edit::id/:content/edit::mediaId",callback:function(a,c,d){b.sulu.viewStates["media-file-edit-id"]=parseInt(d),b.emit("sulu.router.navigate","media/collections/edit:"+a+"/"+c)}}),a.components.before("initialize",function(){"Sulu App"===this.name&&(this.sandbox.on("husky.data-navigation.collections.select",function(a){null===a&&this.sandbox.emit("sulu.router.navigate","media/collections/root")}.bind(this)),this.sandbox.on("husky.data-navigation.collections.add",function(a){var b=this.sandbox.dom.createElement('<div id="collection-add"/>'),c=a&&a.id?a.id:null;this.sandbox.dom.append("body",b),this.sandbox.start([{name:"collections/create-overlay@sulumedia",options:{el:b,parent:c,createdCallback:function(a){this.sandbox.emit("sulu.labels.success.show","labels.success.collection-save-desc","labels.success"),this.sandbox.emit("sulu.router.navigate","media/collections/edit:"+a.get("id")+"/files"),this.sandbox.emit("husky.data-navigation.collections.set-url","/admin/api/collections/"+a.get("id")+"?depth=1")}.bind(this)}}])}.bind(this)))})}});