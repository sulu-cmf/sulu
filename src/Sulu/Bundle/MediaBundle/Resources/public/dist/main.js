require.config({paths:{sulumedia:"../../sulumedia/dist",sulumediacss:"../../sulumedia/css","extensions/masonry":"../../sulumedia/dist/extensions/masonry","extensions/sulu-buttons-mediabundle":"../../sulumedia/dist/extensions/sulu-buttons","services/sulumedia/media-router":"../../sulumedia/dist/services/media-router","services/sulumedia/overlay-manager":"../../sulumedia/dist/services/overlay-manager","services/sulumedia/collection-manager":"../../sulumedia/dist/services/collection-manager","services/sulumedia/image-editor":"../../sulumedia/dist/services/image-editor","services/sulumedia/media-manager":"../../sulumedia/dist/services/media-manager","services/sulumedia/format-manager":"../../sulumedia/dist/services/format-manager","services/sulumedia/user-settings-manager":"../../sulumedia/dist/services/user-settings-manager","services/sulumedia/file-icons":"../../sulumedia/dist/services/file-icons","type/media-selection":"../../sulumedia/dist/validation/types/media-selection","datagrid/decorators/masonry-view":"../../sulumedia/dist/components/collections/masonry-decorator/masonry-view"}}),define(["services/sulumedia/media-router","services/sulumedia/user-settings-manager","services/sulumedia/overlay-manager","extensions/masonry","extensions/sulu-buttons-mediabundle","sulumedia/ckeditor/media-link","css!sulumediacss/main"],function(a,b,c,d,e,f){"use strict";return{name:"SuluMediaBundle",initialize:function(b){var c=b.sandbox;b.components.addSource("sulumedia","/bundles/sulumedia/dist/components"),d.initialize(b),e.initialize(b),c.urlManager.setUrl("media","media/collections/edit:<%= collectionId %>/files/edit:<%= mediaId %>",function(a){return{mediaId:a.properties.media_id,collectionId:a.properties.collection_id}}),a.initialize(b.sandbox.mvc.routes),c.ckeditor.addPlugin("mediaLink",new f(b.sandboxes.create("plugin-media-link"))),c.ckeditor.addToolbarButton("links","MediaLink","image"),b.components.before("initialize",function(){"Sulu App"===this.name&&(this.sandbox.on("husky.dropzone.error",function(a,b){var c=this.sandbox.translate("sulu.dropzone.error.title"),d="sulu.dropzone.error.message";c=c.replace("{{filename}}",this.sandbox.util.cropMiddle(b.name,20)),5007===a.code&&(d="sulu.dropzone.error.message.wrong-filetype"),this.sandbox.emit("sulu.labels.error.show",d,c)}.bind(this)),this.sandbox.on("husky.dropzone.error.file-to-big",function(a,b){var c=this.sandbox.translate("sulu.dropzone.error.file-to-big.title");c=c.replace("{{filename}}",this.sandbox.util.cropMiddle(b.name,20)),this.sandbox.emit("sulu.labels.error.show",a,c)}.bind(this)))})}}});