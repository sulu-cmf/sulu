define(["widget-groups"],function(a){"use strict";var b={datagridInstanceName:"contacts"},c=function(){this.sandbox.on("sulu.list-toolbar.delete",function(){this.sandbox.emit("husky.datagrid."+b.datagridInstanceName+".items.get-selected",function(a){this.sandbox.emit("sulu.contacts.contacts.delete",a)}.bind(this))},this),this.sandbox.on("sulu.list-toolbar.add",function(){this.sandbox.emit("sulu.contacts.contacts.new")},this),this.sandbox.on("husky.datagrid."+b.datagridInstanceName+".number.selections",function(a){var b=a>0?"enable":"disable";this.sandbox.emit("husky.toolbar.contacts.item."+b,"delete",!1)}.bind(this))},d=function(a){this.sandbox.emit("sulu.sidebar.set-widget","/admin/widget-groups/contact-info?contact="+a)},e=function(a){this.sandbox.emit("sulu.contacts.contacts.load",a)};return{view:!0,layout:{content:{width:"max"},sidebar:{width:"fixed",cssClasses:"sidebar-padding-50"}},header:{title:"contact.contacts.title",noBack:!0,breadcrumb:[{title:"navigation.contacts"},{title:"contact.contacts.title"}]},templates:["/admin/contact/template/contact/list"],initialize:function(){this.render(),c.call(this)},render:function(){this.sandbox.dom.html(this.$el,this.renderTemplate("/admin/contact/template/contact/list")),this.sandbox.sulu.initListToolbarAndList.call(this,"contacts","/admin/api/contacts/fields",{el:this.$find("#list-toolbar-container"),instanceName:"contacts",template:"default"},{el:this.sandbox.dom.find("#people-list",this.$el),url:"/admin/api/contacts?flat=true",searchInstanceName:"contacts",searchFields:["fullName"],resultKey:"contacts",instanceName:b.datagridInstanceName,clickCallback:a.exists("contact-info")?d.bind(this):null,actionCallback:e.bind(this)},"contacts","#people-list-info")}}});